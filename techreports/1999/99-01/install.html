<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Installation and Invocation</title>
  </head>

  <body>

<center>
<h4>Reflective Software Engineering with the Leap toolkit</h4>
<h1>Installation and Invocation</h1>
<p>
<!-- Created: Tue Jan 19 10:52:57 HST 1999 -->
<!-- hhmts start -->
Last modified: Sat Aug 28 14:06:21 HST 1999
<!-- hhmts end -->
<p>

</center>

<p><hr>
<h2>Table of Contents</h2>
<ul>
<li> <A HREF="install.html#Downloading">Downloading the system</A>
<li> <A HREF="install.html#Contents">Contents of the distribution</A>
<li> <A HREF="install.html#Invocation">Default invocation</A>
<li> <A HREF="install.html#Batch">Batch file invocation</A>
<ul>
<li> <A HREF="install.html#BatchAnatomy">The anatomy of a Leap batch file</A>
<li> <A HREF="install.html#BatchCustomizing">Creating customized batch files</A>
<li> <A HREF="install.html#Environment">The "Out of Environment Space" problem</A>
</ul>
<li> <A HREF="install.html#Other">Installation on "Other" Platforms</A>
<li> <A HREF="install.html#Prefs">The user preferences facility</A>
<li> <A HREF="install.html#Extensions">Extensions</A>
</ul>
<p>

This chapter contains instructions for downloading and installation of the
system. We are currently in the process of upgrading the Leap installation
software, and as a result there may be temporary minor inconsistencies
between the screen images you see presented in this chapter and the latest
version of Leap. 

<p><hr><p><h2><A NAME = "Downloading">Downloading the system</a></h2>


To download Leap, you go to the Leap toolset home page at: <A
HREF="http://csdl.ics.hawaii.edu/Tools/LEAP/LEAP.html">http://csdl.ics.hawaii.edu/Tools/LEAP/LEAP.html</A>.
This page contains a set of links with information about Leap, including
one which takes you to a set of pages built using the InstallAnywhere
package.  The first page checks to see what platform you are using, and 
provides you with a splash screen and two buttons:

<p>
<img src="screens/install-intro.gif">
<p>

If you want to install the system directly onto your computer, and
InstallAnywhere has correctly identified the type of computer you are
using, then click the left button.  This will initiate the process of
downloading and installing the Leap toolkit and the associated Java Runtime
Environment (JRE) for your environment.

<p>
Clicking the "Advanced Options" button brings up the following window,
which gives you some additional options:

<p>
<img src="screens/install-advanced.gif">
<p>

The top choice box allows you to choose which kind of Java Runtime
Environment will be downloaded with your installation. Currently, you can
choose a JRE for the Windows95/98/NT environment, Solaris SPARC, or the
MacOS.  There is also a fourth choice, labelled "Other Platform". This 
choice does not download any JRE, and thus will require you to already
have a Java runtime environment installed on your machine.  (As a result,
the size of this download is somewhat smaller than the other three.)

<p>

The bottom button allows you to decide whether to install the system 
directly into your environment, or to download a self-expanding .exe
file which, when double-clicked, will perform the installation.  The 
advantage to obtaining the .exe file is that you can then copy that
file to other machines locally to install Leap, which is often faster
and does not require the other machines to have net access.  Note
that the type of .exe file is specific to the platform selected in
the top choice box. Thus, if you desire to install Leap on multiple
machines, some of which are PCs, some of which are Macs, and some
of which are Solaris, you will need to download three .exe files, one
for each platform, and make sure you use the correct .exe file on
the correct platform.

<p>

In some cases, downloading using the FTP protocol is more reliable than
the HTTP protocol.  For this reason, we keep copies of the .exe files 
for Leap available at the UH ICS ftp site. See the LEAP home page for
the current link to this area. For most users, download using the web
page is the easiest and preferred solution.

<p><hr><p><h2><A NAME = "Contents">Contents of the distribution</a></h2>

Once you have installed the Leap distribution, you will have a 
folder called Leap. The location of this folder depends upon
the choice you made during the installation procedure. For PC users,
the default location is c:\Program Files\Leap, for example.   
<p>

In general, the distribution contains: binaries for the Leap toolkit and
the Java Runtime Environment; example data files with sample checklists,
patterns, defect types and so forth; and example batch files you can use to
create customized invocations of Leap.  Let's now look at the files and
subdirectories in the top-level Leap distribution folder in detail to see how it
is organized.

<dl>
<p><dt><b>Leap.exe</b> (file)
<dd>This double-clickable file
invokes the Leap Toolset, but does not load any definition files. This is
the file that is invoked when you choose "Leap" from the Start menu (for
those using the Windows installation.) If you want to invoke Leap and
automatically load a file of your leap data and definitions, which is the
usual case, you'll want to customize one of the batch files included with
the distribution, as discussed in Section <A
HREF="install.html#Batch">Custom batch files</A>.  Note that this file
is represented by the following icon in Windows:
<br> <img src="screens/leap-icon.gif"> 


<p><dt><b>Leapconsole.exe</b> (file)
<dd> Invokes Leap along with a  console window. This can be useful 
for debugging purposes, since messages are printed to the console
by Leap occasionally. 

<p><dt><b>UninstallLeap.exe</b> (file)
<dd> Double-clickable file for removing the Leap distribution from your
computer. Note that you should always remove the current distribution
before downloading a new distribution. 

<p><dt><b>README.html</b> (file)
<dd> A file containing any late-breaking news about this distribution.

<p><dt> <b>demo</b> (folder)
<dd> This folder contains three kinds of files: 
<ul>
<li> Batch files (*.bat): these files provide examples of 
custom files for invoking Leap on a Windows environment. 
<li> Shell files (*.sh): these files provide examples of 
custom files for invoking Leap on a Unix environment.
<li> Leap files (*.leap): these files contain example 
Leap definitions for defect types, checklists, patterns, and so forth.
</ul>

<p><dt> <b>dev_info</b> (folder)
<dd> This folder contains several files useful to Leap developers:
known-problems.html, release-history.html, and release-plans.html.

<p><dt> <b>extensions</b> (folder)
<dd> This folder contains several example programs that can
be dynamically loaded into Leap using its "extensions" mechanism.

</dl>

<p>

The following files and subdirectories in the top-level Leap folder are not
generally interesting to most users. Some of them may not be included on
all platforms or all distributions.

<dl>

<p><dt><b>Leap.ico</b> (file)
<dd>A file containing the image of the Leap icon used
for the double-clickable file.

<p><dt><b>bin</b> (folder)
<dd>The bin folder contains a number of files comprising the binaries for
the Leap system.  In general, there is little need to deal with this folder.

<p><dt><b>jre</b> (folder)
<dd>The jre folder contains a set of files and subdirectories for the 
Java Runtime Environment (JRE) for the system type associated with this
download.  If you downloaded the version of Leap for "Other Platforms",
then this subfolder is not included in the distribution since 
InstallAnywhere does not provide JREs for platforms other than MacOS,
Windows, and Solaris. (However, JREs for other platforms, such as Alpha,
do exist.  See below for instructions on how to deal with these
situations.)

<p><dt><b>Uninstaller Data</b> (folder)
<dd>The Uninstaller Data folder contains the files needed to
automatically remove the Leap system from your computer. 

<p><dt> <b>Leap.gif</b> (file)
<dd>This file contains the Leap icon. 

<p><dt> <b>Leap.lax, lax.jar</b> (files)
<dd>These files are support files for the Leap launcher facility
provided by InstallAnywhere

</dl>

<p><hr><p><h2><A NAME = "Invocation">Default invocation</a></h2>

There are two ways to perform the "default" invocation of Leap: using the
menus (such as the Start Menu on the Windows platform) or double-clicking
on the Leap icon in the Leap folder.  If Leap has been installed
successfully, then default invocation will result in the appearance of 
the Leap command tool window:
<p>
<img src="screens/leaptool-default.gif"> 
<p>

The default invocation of Leap uses the Java Runtime Environment  (JRE)
provided in the download, and does not load any Leap files.  Although
in many cases the downloaded JRE is perfectly adequate, it quickly becomes 
irritating to have load your file(s) of definitions and data when running
Leap.  A better approach is to create batch files that invoke Leap and
employ various command line options to automatically load one or more
Leap files.   The next section shows you how this works.

<p><hr><p><h2><A NAME = "Batch">Batch-file invocation</a></h2>
<p><h3><A NAME = "BatchAnatomy">The anatomy of a Leap batch file</a></h3>

Most Leap users build their own custom batch files to invoke Leap.  In most
cases, this is quite simple to do and only takes a few seconds. The basic
approach is to start with one of the batch files provided with the Leap
distribution, copy it to a location outside of the Leap distribution area,
and edit it to suit your individual needs.  Creating custom batch files
is fairly trivial once you understand how they are constructed. 
Let's examine the contents of an example Leap batch file for the Windows
platform.
<p>
<pre>
rem RunLeap.bat: Runs LEAP with pre-installed Java.

rem Edit if LEAP is not installed in default location.
set LEAP=c:\PROGRA~1\Leap

set CLASSPATH=%LEAP%\bin\leap-5.6.0.jar;%LEAP%\bin\swingall.jar;%LEAP%\bin\jclass-360S.jar;%LEAP%\bin\jscape.zip;%LEAP%\extensions\;

%LEAP%\jre\bin\jre csdl.leap.tool.LeapTool c:\LeapDefs\mydata.leap
</pre>
<p>

As illustrated above, a Leap batch file typically consists of three
non-comment lines: one to establish where the Leap distribution is located,
one to set the CLASSPATH variable appropriately, and one to invoke the Leap
tool.

<p>

In this example, the first non-comment line specifies that the Leap distribution is
installed in the default location (the "Program Files" folder).  Notice
that you need to use the MS-DOS version of folder names in a batch
file. To determine the MS-DOS name for a file or folder, right click on it
and select Properties.  The resulting window lists among other things its
MS-DOS name.

<p>

The second non-comment line specifies the CLASSPATH that the Java
environment uses to find the Leap executable files and associated
libraries.  The correct CLASSPATH for invoking Leap varies from release to
release, and you should always consult the example batch files in the demo
folder for templates.  In this example, the CLASSPATH is set to jar
files containing the Leap release 5.6.0, the Swing GUI library, the JClass
GUI library, the JScape mail package, and the folder containing the Leap
extensions.  This structure is used for invocation using Java 1.1.  Once
we move to Java 1.2, the CLASSPATH will become much simpler.

<p>

The third non-comment line invokes Leap.  In this example, the batch file
invokes the JRE (Java Runtime Environment) contained within the Leap
distribution, passes it the top-level class for Leap
(csdl.leap.tool.LeapTool), and then provides a command line argument
containing a file of Leap data to be loaded (c:\LeapDefs\mydata.leap).

<p>

Batch files for the Unix platform differ only with respect to syntax; the
underlying structure and behavior are identical.  Here is an example
shell file for the Unix platform:
<p>
<pre>
#!/bin/csh
#  -*- Mode: csh -*- 
#  RunLeap.sh -- Runs Leap with pre-installed Java.

# Edit if LEAP is not installed in default location.
set LEAP="/usr/local/leap"

set CLASSPATH="$LEAP/bin/leap-5.6.0.jar:$LEAP/bin/swingall.jar:$LEAP/bin/jclass-360S.jar:$LEAP/bin/jscape.zip:$LEAP/extensions/:"

$LEAP/jre/bin/jre csdl.leap.tool.LeapTool ~johnson/LeapDefs/mydata.leap
</pre>
<p>

<p><h3><A NAME = "BatchCustomizing">Creating custom batch files</a></h3>

There are four basic situations in which you will want to roll your own
batch files: (1) when you have installed Leap in a non-default location;
(2) when you have downloaded an updated Leap jar file and want to use it
instead of the jar file contained in your original distribution; (3) when
you want to run Leap using a Java runtime environment other than the one
with the Leap distribution; and (4) when you want to invoke Leap and
provide it with command line arguments.

<p>

Before discussing any of these situations, I want to inform you of the
following golden rule of Leap installation and invocation: <em>Never store
any of your personal Leap data or batch files in the Leap installation 
folder</em>.  The reason for this is simple: whenever you download and
install a new Leap distribution you must first delete the previous 
installation folder.  If you're storing your data or custom batch files in
that folder, you will lose them. Instead, create a separate folder called
something like "LeapDefs" in your home directory, and store your data and
batch files there. That way, you won't lose them (unless your disk fails
and you haven't backed it up. You <em>are</em> backing up your data
regularly, right?)

<p>

The first situation involves the installation of Leap in a non-default
location. In this situation, you make a copy of one of the 
example batch files into your personal area, then edit the first 
non-comment source line to point to the Leap distribution. 

<p>

In the second situation, we have published an update to Leap and, in
addition to the full installation on the Leap home page, we have included
a pointer to just the Leap jar file. We do this because the full Leap
installation (including the Java runtime environment and class libraries) 
requires approximately 8MB to download, while the Leap jar file itself requires
less about .5MB to download. In situations where the only part of the 
distribution that has changed is the Leap jar file, it can be much 
faster for users to simply download the jar file and update their batch 
files to point to it.  

<p>

For example, when you originally download leap, let's say you obtained a
jar file called "leap-5.6.0.jar" in the bin folder.  Some time later, you
receive an email from the Leap-users mailing list that release 5.6.1 has
become available. Going to the Leap home page, you find a pointer to the
file leap-5.6.1.jar in addition to the normal InstallAnywhere downloading
mechanism.  You can update your installation to 5.6.1 by downloading
leap-5.6.1.jar into your bin folder (which will now contain two Leap jar files,
leap-5.6.0.jar and leap-5.6.1.jar).  Next, you make a copy of one of the
example batch files into your personal area, then you edit the second
non-comment line of this custom batch file to make CLASSPATH refer to
leap-5.6.1.jar rather than leap-5.6.0.jar. The next time you run the batch
files, you will run the updated system.  Note that it is good policy to
refrain from deleting the old Leap jar file until you are sure that the new
one works properly in your environment. In cases where more than just the
jar file has changed, we will indicate this in the downloading instructions
and may decide not to include pointers to individual files. In this case,
you'll need to download the entire distribution again.

<p>

The third situation involves running Leap using a different Java runtime
environment than that included with the Leap distribution.  You might be
interested in this in two situations: when you have installed a runtime
environment that you believe has better performance than the environment
provided with Leap, or when you work on a platform (such as Compaq Alpha)
for which the Leap distribution does not include a runtime environment.  In
this situation, you make a copy of one of the example batch files
into your personal area, then edit the third non-comment source line. By
default, the third non-comment line begins with a pointer to the location
of the Leap-supplied Java runtime environment (such as
"%LEAP%\jre\bin\jre").  To change the Java runtime environment, you edit
this string to point to the new environment (such as
"c:\jdk1.1.8\bin\java").  Note that if you observe problems using Leap,
please mention which runtime environment you are using when you report the
problem to the leap developers.

<p>

In the fourth situation, you want to provide command line arguments to
Leap.  The most common command line arguments are one or more leap data
files that you would like to be automatically loaded.  In this situation,
make a copy of one of the example batch files into your personal area, then
edit the third non-comment source line and add the files you would like
loaded to the end of the line.  

<p>

The only interesting non-file command line argument provided in Leap at
this point is "-title".   Titling your Leap tool is useful when
you divide your leap data among different files according to type, and
use different Leap batch files to load the different files. So, for 
example, assume you have two Leap data files, one for technical reports
and one for programs.  The following line runs Leap with a title 
indicating which data file was loaded:

<pre>
%LEAP%\jre\bin\jre csdl.leap.tool.LeapTool -title "Tech Reports" c:\LeapDefs\tr-data.leap
</pre>






<p><h3><A NAME = "Environment">The "Out of Environment Space" problem</a></h3>

Under the various flavors of Windows operating systems, it is quite common 
after creating a custom batch file to encounter an "Out of Environment Space"
error when attempting to invoke them. This problem results from a 
Windows bogosity that you fix by editing the CONFIG.SYS file and inserting
the following line:

<pre>
SHELL=C:\COMMAND.COM /E:4096 /P
</pre>

This line changes the environment space allocated for a batch file from
some absurdly low number (like 256) to a reasonable number (4096). If your
COMMAND.COM file is located on another drive, then substitute that drive
letter for "C:" in the example line above. For more details, consult the
Knowledge Base article Q230205 at the Microsoft Web Site.

<p><hr><p><h2><A NAME = "Other">Installation on "Other" platforms</a></h2>

The Leap installer provides full support for installation on a Windows,
Macintosh, and Solaris Unix environment.  "Full support" means that the
installer can download and install a Java runtime environment 
for any of these three environments. 

<p>

If you are using some other operating system, such as AIX, BeOS, MVS, etc.,
then the Leap installer will not be able to install a Java runtime
environment.  In this case, to install Leap you will first need to download
and install a Java runtime environment appropriate to your platform, then
edit or create a batch file that invokes Leap with the Java runtime 
environment you've installed. 

<p>

Note that the Leap Windows installation assumes an Intel platform. This
means that environments like Compaq's Alpha/NT will run the Leap 
Windows Java runtime environment in emulated mode, greatly reducing
performance. To improve performance on this and other non-Intel Windows
environments, you can install a native Java runtime environment and use
custom batch files to invoke Leap with this runtime environment.

<p>

<p><hr><p><h2><A NAME = "Prefs">Setting user preferences </a></h2>

Leap maintains a "preferences" file in your home directory that stores
important settings to be maintained between invocations.  This file is
called Leap.prefs and is automatically loaded each time you start Leap and
saved each time you exit the system. To display the table of settings, pull
down the File menu and then select "Preferences".  Currently, user
preferences consist of the following:
<ul>
<p><li> Mail server. If you are using the mail utility within Honu to email 
defect data, you can use this preference setting to establish the name
of your local mail server, such as "mailservice.hawaii.edu".  

<p><li> Extensions.  If you are using Leap extensions, you need to provide
this setting to tell Leap where to look for the files. A
common setting is "c:\PROGRA~1\Leap\extensions\"

<p><li> Hidden column preferences.  This is non-user editable setting. It
saves the state of the columns hidden in each Leap table viewer, so that, 
for example, if you hide the "Severity" column in Honu during one session,
it will remain hidden by default in all future sessions until you decide
to display it again. 
</ul>


<p><hr><p><h2><A NAME = "Extensions">Extensions </a></h2>

Leap provides an extensions facility that allows users to write
customized "plug-ins" to extend the features and capabilities of Leap.
Leap extensions can be written to provide new data collection tools, new
analysis mechanisms, and better integration between Leap and your local
software development environment. The Leap extension mechanism is
designed so that plug-ins can be dynamically added without requiring
recompilation or other changes to the Leap software.  In essence, 
the user writes a Java program and provides a class that satisfies
the Leap extensions interface API.  Next, the user places the 
executable (.class) files into a special "extensions" directory 
and tells the Leap system where this directory is by setting the 
Extensions preference. Finally, the "Extensions" menu item in the 
Leap command tool can be used to load the extension into Leap. This
loading process typically results in the addition of new menu items
to the Leap command tool to support invocation of the extension.
<p>

The Leap distribution provides several example extensions with source code.
A tutorial on how to write Leap extensions is forthcoming. 

<p><hr><p>
    <address><a href="mailto:johnson@natasha.ics.Hawaii.Edu">Philip Johnson</a></address>
  </body>
</html>
