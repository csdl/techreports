%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 95-14.tex -- 
%% Author          : Philip Johnson
%% Created On      : Thu Mar  9 14:21:21 1995
%% Last Modified By: Philip Johnson
%% Last Modified On: Thu Feb  8 15:12:37 1996
%% Status          : Unknown
%% RCS: $Id$
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 University of Hawaii
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

%% http://oneworld.wa.com/htmldev/devpage/dev-page.html

\documentstyle[nftimes,11pt,/group/csdl/tex/definemargins,
               /group/csdl/tex/functiondoc,
               /group/csdl/tex/lmacros]{article}

\input{/group/csdl/tex/psfig/psfig}
\pagestyle{headings}

\begin{document}

\title{{\bf The CA/M Architecture for Project HI-TIME\\
       {\small A Final Project Report to the 
       Pacific International Center for High Technology Research}}}
       

\author{Philip Johnson\\ 
        Collaborative Software Development Laboratory\\
        Department of Information and Computer Sciences\\ 
        2565 The Mall\\ 
        University of Hawaii\\ 
        Honolulu, Hawaii 96822\\ 
        (808) 956-3489\\
        {\tt johnson@hawaii.edu}}

\date{ICS/CSDL-TR-95-14 \\ \today}

\maketitle

\newpage
\vfill
\tableofcontents
\vfill
\newpage

\vfill
\begin{abstract}

This document reports on the work done as part of the Project
``Collaboration Mechanisms for Project HI-TIME: Hawaii Telecommunications
Infrastructure Modernization and Expansion: A Model for Statewide
Strategic Planning'', Subcontract 131030-002.  

In the project, in response to the requirements for Project HI-TIME, a
collaborative architecture called ``CA/M'' has been designed and
implemented and used to build a collaborative system for Project
HI-TIME.  

This report documents the current state of the project, providing an
overview of Project HI-TIME requirements, the CA/M architecture designed
in response to the these requirements, and the status of research on 
this project.  The appendix contains the current design of the CA/M
architecture. 

\end{abstract}

\vfill
\newpage

\section{Requirements for Project HI-TIME}

Project HI-TIME is intended to provide an unprecedented level of
involvement in the telecommunications strategic planning process, and will
change the paradigm of telecommunications strategic planning from a linear
start/stop process to a continuous, incremental process.

To make the planning process as visible as possible, various intermediate
work products must be widely accessable. To make the planning process
open to the broadest spectrum of stakeholders as possible, comments and critiques of
these work products must be supported.  Project HI-TIME envisions thousands of
participants generating tens of thousands of discrete contributions, each
of which must be evaluated and potentially integrated into the emergent
strategic planning documents.

The Coordinated Agent/Mailbox (CA/M) architecture for collaboration in
Project HI-TIME attempts to support the greatest possible visibility and
input into the process in the most cost-effective manner possible.  The
design of this architecture rests upon the following two fundamental
premises concerning technological support for Project HI-TIME:

\begin{enumerate}
\item {\em The Internet must provide the backbone for collaboration.}

  Project HI-TIME is intended to support (a) active involvement by
  hundreds or thousands of stakeholders distributed across all Hawaiian
  islands, and (b) incremental construction and revision of
  telecommunication policy documents.  Supporting this level of
  sustained, active, and geographically distributed involvement through
  manual (non-networked, non-computerized) mechanisms would be
  prohibitively costly.  A central problem for Project HI-TIME is how to
  gather input and publish documents in a cost-effective manner.

  I believe that the only cost-effective manner to carry out the
  collaborative goals for Project HI-TIME is to employ the Internet as
  the primary transport, access, storage, and retrieval mechanism.
  The State of Hawaii is now home to almost a dozen Internet service provider
  businesses,
  who provide reliable and competitive access to the
  Internet through a local phone call on Oahu, Maui,
  Kauai, and the Big Island. Residents of other islands can reach the
  Internet through a long distance phone call to these other islands.
  Once connected to the Internet, participation in
  Project HI-TIME is simple, efficient, and low-cost.

  While the Internet must be the {\em primary} infrastructure for input
  and access, Project HI-TIME must not {\em restrict} access to only
  those stake-holders with Internet access.  Community meetings, phone
  surveys, print and television media, and other mechanisms for
  participation should be considered as additional channels for
  input.  However, these formats must serve as secondary avenues for
  communication. For example, input from a community forum will be transcribed and
  entered into the Internet-based Project HI-TIME  archive.
  Similarly, documents provided to the media will have been
  previously or simultaneously ``published'' on the Internet.

\item {\em The World Wide Web must provide the backbone for publication.}

  Given the choice of the Internet as the primary networking
  infrastructure, the World Wide Web (WWW) becomes the natural choice for
  publication of documents related to Project HI-TIME. The WWW enjoys
  many desirable features as a publication mechanism.  First, browser and
  server software systems for all hardware platforms are widely available
  and low-to-zero cost. Second, automated indexing, searching, and
  retrieval mechanisms for WWW documents are available and can facilitate
  access to information as the database grows in size and complexity.
  Third, the WWW is the de facto standard for Internet publishing.

  Similar to the case presented for the Internet, the WWW must be viewed
  as the primary but not exclusive format for information publication.
  What makes the WWW so attractive is that many mechanisms are already
  available to translate WWW documents into alternative formats, such as
  hardcopy, fax, e-mail, and even oral transcription.

\end{enumerate}

The choices of the Internet and WWW for Project HI-TIME provide only the
starting point for the design of collaboration support.  The Internet and
WWW provide extremely important infrastructure, but they do not define the
process of collaboration, the look-and-feel of Project HI-TIME services, or
address the issues of security and authentication.  The next section
presents the CA/M architecture designed as part of this project, which
addresses these issues through an integrated toolset layered on top of the
Internet and WWW.

\section{The CA/M Architecture}

To exploit the strengths of internet/WWW-based collaboration, while 
minimizing its weaknesses, we designed an architecture called
Coordinated Agents/Mailbox (CA/M), pronounced ``Cam''.  The CA/M 
architecture includes two orthogonal components: an architecture
for communication, and an architecture for information.  We discuss
each of these below.

\subsection{The CA/M Communication Architecture}

The communication component of the CA/M architecture defines how
information flows between the various participants in Project HI-TIME.
Figure \ref{fig:communication-architecture} illustrates the {\em canonical
information cycle\/} in the CA/M communication architecture. In this
canonical form of interaction, users learn about Project HI-TIME by
browsing the contents of its WWW server.  They then submit new documents,
critiques, comments, suggestions, or other forms of dialogue to Project
HI-TIME via a WWW form retrieved from the server.
This form activates a script that
converts the information to an e-mail message that is sent to the
Project HI-TIME mailbox.    The CA/M mail agent processes
the submission and forwards it on to 
one or more of the HI-TIME moderators for review via e-mail.  The
moderators review and possibly revise the submission, then forward it 
to the CA/M WWW Agent for inclusion into the server.  The submission is then
publically available to users, which may stimulate additional commentary.


\begin{figure}[htbp]
  \centerline{\psfig{figure=cam-architecture2.ps}} 
\caption{The {\em canonical information cycle} in the CA/M Communication Architecture} 
\label{fig:communication-architecture}
\end{figure}

Figure \ref{fig:communication-architecture} 
illustrates the most typical mechanisms for communication in Project HI-TIME, but
others are also possible.  For example, users may obtain information about
Project HI-TIME by mechanisms other than the WWW Server.  For example, a
Fax Agent can be incorporated into the mechanism to work in parallel with
the Mail and WWW Agent, and whose responsibility is to (a) send fax
versions of submissions and updates to organizations without Internet/WWW
Access, and (b) receive faxes, convert to ASCII format, and forward via
e-mail to the CA/M Internet mailbox.  

While Figure \ref{fig:communication-architecture} illustrates the
information flow for simple, successful submission of new information,
other communication paths will frequently occur in practice.  For example,
the HI-TIME moderators may reject the submission, in which case it will be
returned to the submitting user with a reason why it is not being included.
Such rejections are also mediated through the CA/M mail agent---the
moderators do not reply to the user directly, but rather forward the
submission back to the CA/M Internet mailbox with an included directive to
the Mail Agent to return the submission to the sender with the explanatory
comment.  By going through the Mail Agent, the system can automatically
maintain an audit trail of all interactions between Project HI-TIME and the
user community.

Finally, Figure \ref{fig:communication-architecture} does not provide any
detail on coordination and communication between the HI-TIME moderators.
Depending upon the type of document, collaboration between moderators could
range from totally informal to a highly structured process of revision,
voting, and acceptance. This initial specification of the CA/M architecture
does not specify intra-moderator collaboration in detail, except to note
that formalized interaction could occur and that the architecture allows a
supportive agent to be constructed to facilitate such work processes.

The next several paragraphs provide rationales for several important
aspects of the CA/M communication architecture.

\paragraph{Input Channels.}  
The CA/M architecture restricts Internet-based input into the system to two
sources: e-mail and WWW forms.  However, the Internet supports a wide
variety of other mechanisms for communication, including socket-based IPC,
ftp, IRC, Unix Talk, vat, CU-SeeMe, the M-bone, and so on.  We chose e-mail
and WWW forms for two reasons.

First, audio, video, IRC/talk, and other {\em synchronous\/} communication
channels do not seem well-suited to goals and resources of Project HI-TIME.
The ultimate goal of Project HI-TIME is the production and maintenance of a
text-based document on telecommunications policy. Thus, the primary forms
of input and output must be textual in nature.

Second, Project HI-TIME seems most cost-effectively served by {\em
asynchronous} communication channels such as e-mail.  The architecture can
be extended to include synchronous and higher bandwidth communication
channels in the future, if the need for them becomes apparent.

\paragraph{Agent-based support.}
Effective coordination of the participants in Project HI-TIME demands that
information be communicated reliably and efficiently.  In addition, an
audit trail of interactions should be accumulated, which helps provide
accountability for actions and also helps provide data necessary for
process improvement and optimization.  To provide reliable, efficient, and
audited communication and coordination among participants, the CA/M
architecture is designed around the use of autonomous, programmable,
software ``agents'', which are used to carry out simple but time consuming
clerical activities related to Project HI-TIME.  We have extensive
experience with the use of software agents for computer-supported
cooperative work applications such as Project HI-TIME, and believe that
only an agent-based architecture can support both the scale and the
sophistication of collaboration sought in Project HI-TIME in a
cost-effective manner.

\paragraph{Moderator-based evaluation of input.} 
Given that e-mail and WWW forms will be used to obtain input to Project
HI-TIME from the community, a second problem concerns the
``signal-to-noise'' ratio within the information system.  While democratic
ideals would seem to argue for unrestricted and uncensored publication of
viewpoints, experience with USENET demonstrates that the quality of
unmoderated information channels can quickly deteriorate without editorial
supervision.  Therefore, the CA/M communication architecture puts
moderators ``in the loop'', who ensure that postings are of sufficient
quality or else sends them back to the poster for editorial revision when
necessary.  The goal is to create a forum for serious, high quality
discussion on telecommunications policy planning that excludes frivolity
and gratuitous ``flaming''.  Since agents maintain an audit trail of
moderator/user interaction, claims of abuse of moderator power can be
investigated.


\paragraph{Security and Authentication.}  

Security and authentication in the CA/M architecture has several
components.  First, the workstations used by Project HI-TIME staff and
developers must follow standard procedures against unauthorized entry, as
is the case for any internet-accessable host.  Of more direct concern in
Project HI-TIME is authentication: how can the identity of users and
HI-TIME moderators be guaranteed?  It is relatively easy for Internet
crackers to ``spoof'' e-mail, making it appear to come from other users.
As a result, it is possible for unscrupulous users to submit postings that
appear to come from high-ranking state government or telecommunications
officials. Worse, it is equally possible for users to spoof the HI-TIME
moderators, and thus direct the CA/M agents to perform unauthorized
actions.  

Authentication in the CA/M architecture is provided differently for users
and HI-TIME moderators.  In the case of users, certain types of comments
are made anonymously and all identifying information is stripped. In these
cases authentication is not an issue.  In situations in which identity is
preserved and authentication prior to publication is required, then some
alternate means of authentication must be provided.  Manual approaches
include authentication by fax, phone, US mail, or other mechanisms.

Spoofed postings by users can be irritating, but the damage is restricted
to misattributed publication of information which can be later
retracted. On the other hand, spoofed moderator commands to the CA/M agents
can potentially result in complete destruction of the server's information
database, requiring total reconstruction from backup and loss of recent
submissions.  Stronger safeguards against spoofing of HI-TIME moderators
must be provided to prevent this from occurring.  The solution is a
``digital signature'' that must be attached to each message to an Agent
from a HI-TIME moderator.  This digital signature is an encoded value that
is based upon the contents of the message itself.  While only the HI-TIME
moderator can create a digital signature using a private password, anyone
(including the Agent software) can verify the correctness of the digital
signature using a public program.  Digital signatures can also be employed
by users who wish to prevent spoofing and who do not wish to employ the
more time-consuming forms of manual authentication.


\paragraph{Roles.}  Figure \ref{fig:communication-architecture} shows 
two kinds of participants in Project HI-TIME: ``users'' and ``HI-TIME
moderators''.  These participants are distinguished by the nature of their
interaction with the system: users browse and submit information, while
moderators review information and interact with the Agents.  ``User'' and
``HI-TIME moderator'' are two instances of {\em roles\/} in the CA/M
architecture.  They are termed roles because a given person can take on
more than one role over a period of time: acting as a user in one context
and a HI-TIME moderator in another, for example.

The User and HI-TIME moderator roles each form the root of a hierarchy of
role types.  Some roles are based upon the organizational perspective or
interest of the participant: for example, participants who work for an
internet service provider may wish to be classified in that user role,
while participants from cable companies may desire their own
classification.  A set of role types can be used to tailor information or
access in a manner appropriate to the individual.

\subsubsection{A CA/M Communication Scenario: New User Registration}

To make the preceeding discussion concrete, consider the following 
``registration'' scenario.

Project HI-TIME will need to maintain a directory of users of the system
for its internal auditing purposes, and also to provide additional services
to the users.  Through registration, users can provide information about
themselves to Project HI-TIME which can help them to stay informed and
improve the quality of their participation.  For example, a user could
request that a summary of changes to the Project HI-TIME WWW server be sent
to them by e-mail once per day, or per week, or per month.  They could also
ask for new draft policies to be sent to them via e-mail, fax, or US mail.
The WWW form in Figure \ref{fig:registration-example} illustrates one such
registration form for Project HI-TIME participants.

\begin{figure}[htbp]
  \centerline{\psfig{figure=registration.ps}} 
\caption{A prototype Project HI-TIME registration form} 
\label{fig:registration-example}
\end{figure}

Once the user presses ``Submit'' in the Project HI-TIME Registration Form,
a script is activated that translates the information into an e-mail
message. The e-mail message generated by  the information in 
Figure \ref{fig:registration-example} appears in Figure 
\ref{fig:registration-email}.

\begin{figure}[htbp]
\small\begin{verbatim}
To: cam@sunset.mic.hawaii.edu
From: www@sunset.mic.hawaii.edu
Subject: [hi-time: registration-submission]
Date: 	Wed, 12 Jul 1995 14:30:28 -1000
Message-Id: <9507130148.AA00001@sunset>

<Name>Philip Johnson</Name>
<Title>Associate Professor</Title>
<Organization>University of Hawaii</Organization>
<E-mail>johnson@hawaii.edu</E-mail>
<Address>2565 The Mall</Address>
<Mail-Stop></Mail-Stop> 
<City>Honolulu</City>
<State>HI</State>
<Zip>96734</Zip>
<Phone>808 956-3489</Phone>
<Cable>off</Cable>
<Telephone>off</Telephone>
<Internet>on</Internet>
<Other></Other>
<Electronic-mail>on</Electronic-mail>
<Fax>off</Fax>
<US-Mail>off</US-Mail>
<Never>off</Never>
<Once-per-day>off</Once-per-day>
<Once-per-week>on</Once-per-week>
<Once-per-month>off</Once-per-month>
\end{verbatim}\normalsize
\caption{The registration e-mail message generated and sent to the CA/M
mail agent. This e-mail will be referred to as ``001'' (the last three characters of the
Message-ID: field.)}
\label{fig:registration-email}
\end{figure}

\begin{figure}[htbp]
\small\begin{verbatim}
To: dave@sunset.mic.hawaii.edu
From: cam@sunset.mic.hawaii.edu
Subject: [hi-time: registration-submission]
Date: 	Wed, 12 Jul 1995 14:30:28 -1000
Message-Id: <9507130148.AA00002@sunset>
References: <9507130148.AA00001@sunset>

To: Project HI-TIME Moderator (registration submissions)
From: CA/M Mail agent
RE: Registration request.

Please reply with: accept, reject, or hold.

---------------------------------------------------------
Name: Philip Johnson
Title: Associate Professor
Organization: University of Hawaii
E-mail: johnson@hawaii.edu
Address: 2565 The Mall
Mail Stop: 
City: Honolulu
State: HI
ZIP: 96734
Phone: 808 956-3489
Cable: off
Telephone: off
Internet: on
Other:
Electronic mail: on
Fax: off
US-Mail: off
Never: off
Once-per-day: off
Once-per-week: on
Once-per-month: off
---------------------------------------------------------
\end{verbatim}\normalsize
\caption{The e-mail message sent by the CA/M mail agent to ``Dave'', the Project
HI-TIME moderator responsible for registration submissions.
This e-mail will be identified as ``002'' (the last three characters of the
Message-ID: field.)}
\label{fig:registration-email-moderator}
\end{figure}

The e-mail message in Figure \ref{fig:registration-email} is sent to 
the user cam@sunset.mic.hawaii.edu, which is the address of the CA/M 
mail agent.  The mail agent periodically wakes up (for example, once
per minute) and checks for incoming mail.  When it receives this e-mail,
it parses the subject line and determines that this is a HI-TIME submission of  
type ``registration-request''.  It then invokes the registration-request 
procedure on this particular e-mail.  The registration-request procedure
could be designed as follows:

\begin{enumerate}
\item Forward a reformatted version of the message to the HI-TIME registration moderator for evaluation.
\item Wait until a reply from the registration moderator occurs, or else
until three days have elapsed. 
\item If a reply is received within three days from the HI-TIME
registration moderator 
regarding this e-mail, perform the procedure indicated. Possible
procedures are registration-request-accept, registration-request-reject, or
registration-request-hold.
\item If no reply is received within three days from the HI-TIME 
registration moderator, then forward the e-mail with notification of 
the lapsed request out to all current HI-TIME moderators. 
\end{enumerate}

The reformatted version of the message sent to the HI-TIME registration
monitor is illustrated in Figure \ref{fig:registration-email-moderator}.
Note that the E-mail agent has reformatted the request to improve
readability, and has provided an explanation of the response needed.


\begin{figure}
\small\begin{verbatim}
To: cam@sunset.mic.hawaii.edu
From: dave@sunset.mic.hawaii.edu
Subject: RE: [hi-time: registration-submission]
Date: 	Wed, 12 Jul 1995 14:30:28 -1000
Message-ID: <9507130148.AA00003@sunset>
In-Reply-To: <9507130148.AA00002@sunset>
References: <9507130148.AA00002@sunset>
            <9507130148.AA00001@sunset>

accept
\end{verbatim}
\caption{The moderator's e-mail reply to the Agent's registration request.}
\label{fig:registration-email-reply}
\end{figure}

Responses from the moderators can often be brief.  For example, for 
a simple registration such as the one above in which no billing is
required, Figure \ref{fig:registration-email-reply} 
illustrates a possible moderator response. 

Figure \ref{fig:registration-email-reply} does not include the digital
signature, which would be automatically included by the moderator's mailer
software.  Note that the ``In-Reply-To:'' and ``References:'' fields are
included automatically by mailer software and are exploited by the CA/M mail
agent to determine which registration the moderator is accepting.  In the
event that the registering user requested fax or hard-copy service, a
billing system would need to be set up.  In this case additional
administrative tasks might occur before accepting the registration.  If
these tasks take longer than three days, the moderator could tell the mail
agent via a ``hold'' message reply that the registration is in process, and
that notification of other moderators after three days is not necessary.

When the CA/M mail agent receives the ``accept'' reply, it looks up the 
procedure for registration-request-accept.  Such a procedure might be 
designed as follows:

\begin{enumerate}
\item Send e-mail to the registering user informing them that their 
      registration has been accepted.
\item Add the user information to an internal HI-TIME directory of
      registered users.
\item Send e-mail to any moderators who have subscribed to the 
      registration-request-accept event informing them of the new
      registered user.
\end{enumerate}

The preceding discussion should provide a sense for the pattern of 
interaction in the CA/M architecture.  Agents serve as ``gateways'' for
information flowing both into and out of Project HI-TIME, and most
communication occurs via e-mail.  These two features motivate the 
``Centralized Agent/Mailbox'' description of the architecture. 

\subsection{The CA/M Information Architecture}

The communication architecture described above provides the general design
for flow of information in Project HI-TIME, but does not specify the {\em
structure} and {\em content} of this information.  The purpose of the CA/M
information architecture is to specify how information will be structured
within the system. It does not attempt to specify the content of this
information.  The information architecture is hypertext, and consists
at the most abstract level of entities and links.

\subsubsection{Entities}

The content-bearing entities in the CA/M information architecture can be
classified into 
two non-overlapping hierarchies of information objects: {\em document\/}
and {\em comment\/}.  

\paragraph{Documents.}
These information objects are entities that are incrementally generated,
reviewed, refined, and modified over time.  For example, a ``Project
HI-TIME Vision Statement'' artifact would be stored in the system as a document
object.  All document objects have the following essential properties:

\begin{enumerate}

\item {\em Mutability.\/} Document objects can be edited.  Concurrency
  control mechanisms, when needed, will be provided to support multiple
  concurrent editing of such documents. CSDL has developed a concurrent
  editor called Shemacs which allows concurrent editing of single files over
  the internet with character-level locking.

\item {\em Versioning.\/} Management of evolving documents requires the
  ability to represent and maintain a sequence of versions.  Each
  document object exists as a sequence of versions, numbered sequentially
  starting with 1.  Only the highest numbered version of a document can
  be changed.  The current highest numbered version of a document is
  referred to as the {\em development\/} version.

  The {\em freeze\/} operation can be applied to the development version
  of a document object.  This produces a new development version, which
  is simply a copy of the previous one with an incremented version
  number. Freezing also disallows any further changes to the previous
  object.  Only specially designated HI-TIME editors can edit or freeze
  document objects.  Freezing can be done at any time by qualified
  personnel, and may occasionally be done automatically by CA/M agents.

  Changes made to the most recent version, if unaccompanied by a freeze
  operation, may result in permanent removal of data. (Note: backups are
  an orthogonal mechanism which can be used to create recoverable
  intermediate versions of the development version of a document object.)

\end{enumerate}

\paragraph{Comments.}
These information objects exist to provide annotations, feedback,
enhancements, suggestions, and proposals either as stand-alone entities
within Project HI-TIME, or as links to pre-existing document or comment
entities. Comments can be contrasted with documents in the following
way:

\begin{enumerate}
\item {\em Non-mutability.\/}  Unlike document nodes, comments cannot be
edited or changed once posted. (One can, however, annotate a comment node
with another comment node that changes or retracts the original.)  

\item {\em Non-versioning.\/}  Since comments are intrinsically immutable,
there is no need to provide versioning. 
\end{enumerate}

\subsubsection{Links}

Every document and comment entity in the Project HI-TIME WWW server contains
a clickable line called ``Make new comment on this page.''  When clicked,
a form is presented that allows the user to provide commentary on the
entity.  Submission of this form activates a script that results in an
e-mail to HI-TIME moderators with the contents of the comment.  When 
approved, the HI-TIME WWW agent will add the comment to the WWW server, 
and will update both the corresponding document and the comment itself
with links to each other.  

The next set of pages illustrates the process of linking with a series
of screen dumps.  Figure \ref{fig:document-example-initial}
illustrates a sample Project HI-TIME document page.  Figure 
\ref{fig:comment-form} illustrates the WWW Form retrieved by clicking on
the link to create a comment, along with a sample comment.    Figure 
\ref{fig:comment-example} illustrates the new WWW comment page created 
after the comment form has been submitted, reviewed by the HI-TIME
moderators, approved, and added to the server by the HI-TIME WWW agent.
Figure \ref{fig:document-example-annotated} illustrates the revised
document page, which now includes a link to the comment. 


\begin{figure}[htbp]
  \centerline{\psfig{figure=document-example-initial.ps}} 
\caption{An example Project HI-TIME document} 
\label{fig:document-example-initial}
\end{figure}

\begin{figure}[htbp]
  \centerline{\psfig{figure=comment-form.ps}} 
\caption{A Project HI-TIME comment form for the preceeding document.}
\label{fig:comment-form}
\end{figure}

\begin{figure}[htbp]
  \centerline{\psfig{figure=comment-example.ps}} 
\caption{The submitted comment, after approval and uploading to the server.} 
\label{fig:comment-example}
\end{figure}

\begin{figure}[htbp]
  \centerline{\psfig{figure=document-example-annotated.ps}} 
\caption{The Project HI-TIME document page with link to the comment
         page.}
\label{fig:document-example-annotated}
\end{figure}

\newpage
\section{Project Status}

\subsection{CA/M implementation}

An initial version of the CA/M architecture was implemented during the
Fall of 1995, and is now accessable on the WWW at 
{\tt http://www.pichtr.htdc.org/$\sim$hitime/}.  This implementation
of the CA/M architecture follows precisely the process flow specified
in the CA/M {\em communication} architecture.  However, during this 
initial implementation, the CA/M {\em information} architecture was 
enhanced in several ways:

\begin{itemize}

\item {\bf Comment enhancements.}  Initial use of the CA/M architecture in
  Project HI-TIME determined that it might be helpful to provide pages that
  aggregate all the commentary received on a given document into a single
  page. The information architecture was extended with the comment-index and 
  comment-collection objects to accomodate this requirement.

\item {\bf Extensible lists and forms.}  Project HI-TIME information
  include a variety of lists, some of which should be extendible through user
  comments. To support this, the information architecture was extended with
  the extensible-list and extensible-form objects.

\item {\bf User input mechanisms.}  Initial use indicated that broader
  mechanisms for user input should be supported directly within the
  architecture.  The survey and question objects provide some of the required
  functionality.

\item {\bf Participants.}  The users of the Project HI-TIME collaborative
  system must be represented directly within the information architecture
  as a way of providing customized services and to resolve issues like
  participant identity.  The participant object in the information
  architecture results from this.

\item {\bf E-mail.} Finally, CA/M includes an explicit representation of
  electronic mail messages in the e-mail class, which supports the
  primary communication pathway between users, agents, and moderators.

\end{itemize}

\subsection{CA/M evaluation}

Evaluation of the CA/M architecture as applied to the domain of Project
HI-TIME is thus far anecdotal.  Various users have accessed the system and
provided feedback on the system in an on-line fashion.  The CA/M
architecture has provided an excellent means for obtaining such forms of
feedback: indeed, more comments to date have been submitted related to
improvements in the CA/M architecture than have been submitted about
telecommunications policy planning!  As the architecture and user interface
matures and stabilizes, we are seeing a decrease in such meta-commentary.

\appendix




\section{Introduction}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam-1.1.9.tex -- 
%% Author          : Carleton Moore
%% Created On      : Wed Jul 19 13:53:43 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Thu Feb  8 10:10:09 1996
%% RCS: $Id: CAM.tex,v 1.1 1995/08/16 23:17:11 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Carleton Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 
\subsection{Overview}

The Coordinated Agent/Mailbox (CA/M) architecture is designed to support
the process of continuous and incremental development of a hypertext
document.  We want to support the greatest possible visibility and input
into the process in the most cost-effective manner possible.  The design of
this architecture rests upon the following two fundamental premises
concerning technological support:
\begin{enumerate}
\item{The Internet must provide the backbone for collaboration.}
  The CA/M architecture is intended to support (a) active involvement by
  hundreds or thousands of stakeholders, and (b) incremental construction
  and revision of documents.

  We believe that the only cost-effective manner to carry out the
  collaborative goals for CA/M is to emply the Internet as the primary
  transport, access, storage, and retrieval mechanism.

\item{The World Wide Web must provide the backbone for publication.}
  Given the choice of the Internet as the primary networking
  infrasturcture, the World Wide Web (WWW) becomes the natural choice for
  publication of documents.  First, browser and server software systems for
  all hardware platforms are widely available and low-to-zero cost.
  Second, automated indexing, searching, and retrieval mechanisms for WWW
  documents are available and can facilitate access to information as the
  database grows in size and complexity.  Third, the WWW is the de facto
  standard for Internet publishing.
\end{enumerate}

\subsection{The CA/M Architecture}

To exploit the strengths of internet/WWW-based collaboration, while
minimizing its weaknesses, we have designed an architecture called
Coordinated Agents/Mailbox (CA/M), pronouced ``Cam''.  The CA/M
architecture defines a {\em canonical information cycle} used for
collaboration.  Figure \ref{fig:canonical} illustrates the {\em canonical
information cycle}.

\begin{figure}[htb] 
  \centerline{\psfig{figure=canonical.eps}}
  \caption{The {\em canonical information cycle} in the CA/M Architecture}
  \label{fig:canonical}
\end{figure}

 
The CA/M architecture is broken down into three subsystems, net, scheduler
and cam.
\begin{itemize}
\item{\bf Net} handles the basic network mail services.
\item{\bf Scheduler} provides a simple mechanism for scheduling activities.
\item{\bf Cam} provides the basic functionality of the CA/M Architecture.
\end{itemize}

\section{Subsystem Cam}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam.tex -- 
%% Author          : Cam Moore
%% Created On      : Mon Sep 18 11:09:34 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 11:30:02 1995
%% RCS: $Id$
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The Main subsystem provides the basic support for collaboration for the
CA/M architecture.  It provides the base constructs for user interaction
consisting of many classes:
\begin{itemize}
\item{\em Document} is the fundamental class that holds the actual text of
the hypertext document.
\item{\em  Comment-form} is the primary way users provide feedback about the
hypertext document.
\item{\em Comment-index} is an index to all the comment documents on a particular
document.
\item{\em Collection} is a collection of all the comment documents on a
particular document.
\item{\em Mail} is the class that represents the communications mechanism for
the CA/M architecture.
\item{\em Participant} is the class that represents all the registered
users of the system.
\end{itemize}

The classes document, comment-form, comment-index, collection represent the
hypertext WWW pages that the users are able to manipulate.  Participant
instances represent the individual users. The mail class and process module
allows the CA/M agent to interact with the users through E-mail.  Figure
\ref{fig:relation} illustrates the relationship between documents,
comment-forms, comment-indexes, and collections.

\begin{figure}[htb] 
  \centerline{\psfig{figure=relation.eps}}
  \caption{The relationship between the different types of Web pages. in the CA/M Architecture}
  \label{fig:relation}
\end{figure}

Each document may have a comment-form associated with it.  Along with the
comment-form the document may have a comment-index which is a list of links
to the comments that have been made on the document.  A collection can also
be associated with the document.  The collection contains the bodies of all
the `comments' on the original document.  Each `comment' is itself another
document. 

\clearpage

\subsection{Class Collection}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam*collection.tex -- 
%% Author          : Cam Moore
%% Created On      : Fri Sep 15 13:10:21 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Fri Sep 15 14:28:19 1995
%% RCS: $Id: cam*collection.tex,v 1.2 1995/09/16 00:29:03 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

Cam*collection instances are a collection of all the comments made about a
source document.  The cam*collection is an indexed page that includes the
contents of all of the comments made about a source document.  The
cam*collection has a ``table of contents'' at the top of the page.  This
``table of contents'' is a list of links to the individual comments.  After
the ``table of contents'' is a brief description of the collection.  Then
the actual bodies of the comments are presented on the page.

Cam*collection instances have the following fields:
\begin{itemize}
\item{\em Title} holds the collection's title.
\item{\em Toc} holds a ``table of contents'' for the collection.
\item{\em Description} holds a brief description of the collection.
\item{\em Body} holds the bodies of the comments.
\item{\em Navigation} holds links to other documents.
\item{\em Actions} holds links to forms. (e.g. cam*comment-form)
\item{\em Header} holds information about the current collection.
\end{itemize}\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*collection}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
add-document & actions & ID-p & collection-ID-format &  \\ 
add-field & body & IDs & header-links &  \\ 
delete & description &  &  &  \\ 
make & directory &  &  &  \\ 
set-actions & feedback &  &  &  \\ 
set-body & field &  &  &  \\ 
set-description & header &  &  &  \\ 
set-feedback & navigation &  &  &  \\ 
set-field & title &  &  &  \\ 
set-header & toc &  &  &  \\ 
set-navigation &  &  &  &  \\ 
set-title &  &  &  &  \\ 
set-toc &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*collection at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*collection*make}{document-ID \&optional title author text breakout-ID comment-form-ID directory}
\index{cam*collection!make}
Creates a new collection page.

{\em Document-Id} is the {\em document-ID} whose comments will be included in the collection.

{\em Title} is a string that contains the {\em title} to be used in the page.  Defaults to
 comments on DOCUMENT`s {\em title}.

{\em Author} is a string containing the {\em author} of the collection. 

{\em Text} is a string that will be displayed at the beginning of the page.

{\em Breakout-Id} is the breakout document for {\em document-ID}.

{\em Comment-Form-Id} is the comment form for {\em document-ID}.

;TOPICS is a list of pairs.  Each pair consists of a string, the topics {\em title}, and
; a document or collection ID of the discussion on the topic.  If TOPICS is non-nil a
; link will be generated from the new collection to the document or collection.

{\em Directory} is the location where the HTML file will be created.  Defaults to
 cam*document*directory.

Returns a collection-ID if successful.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*collection*delete}{collection-ID}
\index{cam*collection!delete}
Deletes {\em collection-ID} from the cam*collections table.
This function does not delete the file associated with {\em collection-ID}.
Returns nil.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*collection*actions}{collection-ID}
\index{cam*collection!actions}
This attribute returns the actions field of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*body}{collection-ID}
\index{cam*collection!body}
This attribute returns the body of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*description}{collection-ID}
\index{cam*collection!description}
This attribute returns the description of contents of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*directory}{collection-ID}
\index{cam*collection!directory}
This attribute returns the directory where COLLECTION-ID's file is stored.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*feedback}{collection-ID}
\index{cam*collection!feedback}
This attribute returns the feedback field of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*field}{collection-ID field}
\index{cam*collection!field}
This attribute returns the {\em field} {\em field} of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
Signals invalid-field-string if {\em field} is not a string.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*header}{collection-ID}
\index{cam*collection!header}
This attribute returns the header of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*navigation}{collection-ID}
\index{cam*collection!navigation}
This attribute returns the navigation field of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*title}{collection-ID}
\index{cam*collection!title}
This attribute returns the title of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*toc}{collection-ID}
\index{cam*collection!toc}
This attribute returns the table of contents of {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*collection*add-document}{collection-ID document-ID}
\index{cam*collection!add-document}
Adds the body of {\em document-ID} to {\em collection-ID}, updates COLLECTION-ID's toc to
point to DOCUMENT-ID's body.
Returns {\em collection-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*add-field}{collection-ID field \&optional value}
\index{cam*collection!add-field}
Adds {\em field} to {\em collection-ID}.  If {\em value} is non-nil then it is inserted into
{\em field}.
Signals invalid-collection-ID if bad {\em collection-ID}.
Signals invalid {\em field} if {\em field} is not a string.
Returns {\em field}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-actions}{collection-ID actions}
\index{cam*collection!set-actions}
Changes COLLECTION-IDs {\em actions} to {\em actions}.
{\em Actions} is a string.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em actions}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-body}{collection-ID body}
\index{cam*collection!set-body}
Changes COLLECTION-IDs {\em body} to {\em body}.
{\em Body} is a string.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em body}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-description}{collection-ID description}
\index{cam*collection!set-description}
Changes COLLECTION-IDs {\em description} to {\em description}.
{\em Description} is a string.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em description}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-feedback}{collection-ID feedback}
\index{cam*collection!set-feedback}
Changes COLLECTION-IDs {\em feedback} to {\em feedback}.
{\em Feedback} is a string.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em feedback}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-field}{collection-ID field value}
\index{cam*collection!set-field}
Changes COLLECTION-ID's {\em field} to {\em value}.
{\em Field} and {\em value} are strings.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em value} if successful.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-header}{collection-ID header}
\index{cam*collection!set-header}
Changes COLLECTION-IDs {\em header} to {\em header}.
{\em Header} is a string.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em header}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-navigation}{collection-ID navigation}
\index{cam*collection!set-navigation}
Changes COLLECTION-IDs {\em navigation} to {\em navigation}.
{\em Navigation} is a string.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em navigation}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-title}{collection-ID title}
\index{cam*collection!set-title}
Changes COLLECTION-IDs {\em title} to {\em title}.
{\em Title} is a string without the $<$TITLE$>$...$<$/TITLE$>$ HTML codes.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em title}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*collection*set-toc}{collection-ID toc}
\index{cam*collection!set-toc}
Changes COLLECTION-IDs {\em toc} to {\em toc}.
{\em Toc} is a string.
Signals invalid-collection-ID if bad {\em collection-ID}.
Returns {\em toc}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{collection\}*ID-p}{obj}
\index{cam*collection!ID-p}
Returns non-nil if {\em obj} is a valid collection-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*\{collection\}*IDs}{\&optional parse-directory-p directory}
\index{cam*collection!IDs}
Returns a fresh list of all the COLLECTION-IDs.
If {\em parse-directory-p} is non-nil forces searching of {\em directory} for collection files.
{\em Directory} defaults to cam*document*directory.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*collection*collection-ID-format}{}
\index{cam*collection!collection-ID-format}
The format string for collection-IDs.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*collection*header-links}{}
\index{cam*collection!header-links}
Holds links that will appear in the collection header.
\end{functiondoc}


\clearpage

\subsection{Class Comment-Form}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam*comment-form.tex -- 
%% Author          : Cam Moore
%% Created On      : Fri Sep 15 14:19:27 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Fri Sep 15 14:31:06 1995
%% RCS: $Id: cam*comment-form.tex,v 1.1 1995/09/16 00:31:24 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The cam*comment-form is the primary mechanism for users to make comments on
cam*documents.  Cam*comment-forms are WWW forms that ask the user to supply
thier thoughts and comments about the source document.  When creating a
cam*comment-forms, the user can supply tickler questions.  Tickler
questions are question that are intended to spur the reader into thinking
about the subject and providing them a starting point for their comments.
In addition to tickler questions each cam*comment-form has a general
comments section that allows the user to provide any comments they may
have.

The cam*comment-form has only two fields, the header and the form.  The
header presents information about the current form.  The form holds the
actual HTML code for the WWW form.\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*comment-form}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
delete & heading & ID-p & comment-form-ID-format &  \\ 
make & next-document-ID & IDs & mailformat &  \\ 
set-heading & title &  &  &  \\ 
set-next-document-ID &  &  &  &  \\ 
set-title &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*comment-form at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*comment-form*make}{\&key source-ID next-ID breakout-ID commentable-p title heading directory link-label mail-to mail-format comment-dir errors-to tickler}
\index{cam*comment-form!make}
Creates a new comment-form page.  The comment-form page is for {\em source-ID}.

{\em Next-Id} is the next document that the user will see after making their comments.

{\em Breakout-Id} is the page that holds the links to the comments and answers to the
 {\em tickler} questions.

If {\em commentable-p} is non-nil a cam*comment-form will be generated for this
 comment-form page and the associated button to add comments will be added to
 this page.

{\em Title} is a string that contains the {\em title} to be used in the page.

{\em Heading} is a string that is used as the top {\em heading}.

{\em Directory} is the location where the HTML file will be created.  Defaults to
 cam*comment-form*directory.

{\em Link-Label} a string is the label for the link to the comment-form.

{\em Mail-To} a string that contains the E-mail address of the CA/M agent.  Defaults to
 cam*mail*agent-email-address.

{\em Mail-Format} a string that holds the file name for the mail message format.
 Defaults to DIRECTORY/mailformat.

{\em Comment-Dir} a string that holds the {\em directory} where the getcomments comment file
 is kept.  Defaults to {\em directory}.

{\em Errors-To} a string that holds the E-mail address where getcomment errors will be sent.
 Defaults to {\em mail-to}.

{\em Tickler} is a list of pairs.  Each pair consists of a string, the {\em tickler} question, and
 a cons cell with the rows and columns for the text area.  

Returns a comment-form-ID if successful.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*comment-form*delete}{comment-form-ID}
\index{cam*comment-form!delete}
Deletes {\em comment-form-ID} from the cam*comment-forms table.
This function does not delete the file associated with {\em comment-form-ID}.
Returns nil.
Signals invalid-comment-form-ID if bad {\em comment-form-ID}.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*comment-form*heading}{comment-form-ID}
\index{cam*comment-form!heading}
This attribute returns the heading of {\em comment-form-ID}.
Signals invalid-comment-form-ID if bad {\em comment-form-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-form*next-document-ID}{comment-form-ID}
\index{cam*comment-form!next-document-ID}
This attribute returns the document ID of the document that will
be viewed after the {\em comment-form-ID} form is filled out.
Signals invalid-comment-form-ID if bad {\em comment-form-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-form*title}{comment-form-ID}
\index{cam*comment-form!title}
This attribute returns the title of {\em comment-form-ID}.
Signals invalid-comment-form-ID if bad {\em comment-form-ID}.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*comment-form*set-heading}{comment-form-ID header}
\index{cam*comment-form!set-heading}
Changes COMMENT-FORM-IDs {\em header} to {\em header}.
{\em Header} is a string.
Signals invalid-comment-form-ID if bad {\em comment-form-ID}.
Returns {\em header}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-form*set-next-document-ID}{comment-form-ID document-ID}
\index{cam*comment-form!set-next-document-ID}
Changes the document that will be viewed after the {\em comment-form-ID} form is 
filled out to {\em document-ID}.
Returns {\em document-ID}.
Signals invalid-comment-form-ID if bad {\em comment-form-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-form*set-title}{comment-form-ID title}
\index{cam*comment-form!set-title}
Changes COMMENT-FORM-IDs {\em title} to {\em title}.
{\em Title} is a string without the $<$TITLE$>$...$<$/TITLE$>$ HTML codes.
Signals invalid-comment-form-ID if bad {\em comment-form-ID}.
Returns {\em title}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{comment-form\}*ID-p}{obj}
\index{cam*comment-form!ID-p}
Returns non-nil if {\em obj} is a valid comment-form-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*\{comment-form\}*IDs}{\&optional parse-directory-p directory}
\index{cam*comment-form!IDs}
Returns a fresh list of all the COMMENT-FORM-IDs.
If {\em parse-directory-p} is non-nil forces searching of {\em directory} for comment-form files.
{\em Directory} defaults to cam*document*directory.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*comment-form*comment-form-ID-format}{}
\index{cam*comment-form!comment-form-ID-format}
The format string for comment form IDs.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*comment-form*mailformat}{}
\index{cam*comment-form!mailformat}
Holds the default mail format for getcomments.
\end{functiondoc}


\clearpage

\subsection{Class Comment-Index}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam*comment-index.tex -- 
%% Author          : Cam Moore
%% Created On      : Fri Sep 15 14:32:09 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Fri Sep 15 14:36:37 1995
%% RCS: $Id: cam*comment-index.tex,v 1.1 1995/09/16 00:36:52 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

Cam*comment-indexes are hypertext indexes to all of the comments on a
cam*document instance.  The cam*comment-index instance has hypertext links
to the actual comment documents.

Cam*comment-index have the following fields:
\begin{itemize}
\item{\em Title} holds the comment-index's title.
\item{\em Body} holds the main text of the hypertext links to the comment documents.
\item{\em Navigation} holds links to other documents.
\item{\em Actions} holds links to forms. (e.g. cam*comment-form)
\item{\em Header} holds information about the current comment-index.
\end{itemize}
\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*comment-index}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
add-comment & body & ID-p & comment-index-ID-format &  \\ 
add-new-question & comments & IDs &  &  \\ 
delete & number-of-comments &  &  &  \\ 
make & source-ID &  &  &  \\ 
parse-for-comments & title &  &  &  \\ 
point-to-collection &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*comment-index at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*comment-index*make}{source-document-ID tickler \&optional title author intro}
\index{cam*comment-index!make}
Creates a new cam*comment-index page.  {\em Source-Document-Id} is the document
that the new comment index will index.
{\em Tickler} is a list of pairs.  Each pair consists of a string, the {\em tickler} question, and
 a cons cell with the rows and columns for the text area.  If {\em tickler} is non-nil an
 entry will be created for each {\em tickler} question.  User responses will be linked to 
 the appropriate {\em tickler} question.
The following parameters are optional and will only be added if they are non-nil.
{\em Title} a string, used as the {\em title} of the comment-index.  Defaults to `Comments
 on $<$SOURCE-DOCUMENT-ID's title$>$`.
{\em Author} a string, used as the {\em author} of the comment-index.  Defaults to `CA/M Agent'.
{\em Intro} a string, used as a brief introduction/description of the comment-index.  
 Defaults to the empty string.

Returns a comment-index-ID.
Signals invalid-document-ID if bad {\em source-document-ID}.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*comment-index*delete}{comment-index-ID}
\index{cam*comment-index!delete}
Deletes {\em comment-index-ID} from the cam*comment-indexs table.
This function does not delete the file associated with {\em comment-index-ID}.
Return nil.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*comment-index*body}{comment-index-ID}
\index{cam*comment-index!body}
This attribute returns the body, a string, of {\em comment-index-ID}.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-index*comments}{comment-index-ID}
\index{cam*comment-index!comments}
This attribute returns a list, possibly empty, of document-IDs associated 
with {\em comment-index-ID}.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-index*number-of-comments}{comment-index-ID}
\index{cam*comment-index!number-of-comments}
This attribute returns the number of comments indexed by {\em comment-index-ID}.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-index*source-ID}{comment-index-ID}
\index{cam*comment-index!source-ID}
This attribute returns the source document ID for {\em comment-index-ID}.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-index*title}{comment-index-ID}
\index{cam*comment-index!title}
This attribute returns the title, a string, of {\em comment-index-ID}.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*comment-index*add-comment}{comment-index-ID document-ID question}
\index{cam*comment-index!add-comment}
Creates a link to {\em document-ID} in the correct place in {\em comment-index-ID}.
{\em Question}, a string, is the tickler {\em question} that {\em document-ID} addresses.
Returns {\em document-ID}.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-index*add-new-question}{comment-index-ID question}
\index{cam*comment-index!add-new-question}
Adds {\em question} to the list of topics in {\em comment-index-ID}.
{\em Question} is a string.
Returns {\em question}.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-index*parse-for-comments}{comment-index-ID}
\index{cam*comment-index!parse-for-comments}
Returns a list of documents-IDs that are comments stored in {\em comment-index-ID}
or nil if there are no comments.
Signals invalid-document-ID if bad DOCUMENT-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*comment-index*point-to-collection}{comment-index-ID collection-ID}
\index{cam*comment-index!point-to-collection}
If COMMENT-INDEX-ID's source page has a collection page make sure there is 
a link to it else, add a link to {\em collection-ID} in the navigation field of 
{\em comment-index-ID}.
Returns the ID of the collection page.
Signals invalid-comment-index-ID if bad {\em comment-index-ID}.
Signals invalid-collection-ID if bad {\em collection-ID}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{comment-index\}*ID-p}{obj}
\index{cam*comment-index!ID-p}
Returns non-nil if {\em obj} is a comment-index object.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*\{comment-index\}*IDs}{\&optional parse-directory-p}
\index{cam*comment-index!IDs}
Returns a fresh list of all the comment-index IDs.
If {\em parse-directory-p} is non-nil forces searching of cam*document*directory for 
comment-index files.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*comment-index*comment-index-ID-format}{}
\index{cam*comment-index!comment-index-ID-format}
The format string for comment index IDs.
\end{functiondoc}


\clearpage

\subsection{Class Document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam*document.tex -- 
%% Author          : Cam Moore
%% Created On      : Thu Sep 14 14:06:11 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Thu Sep 14 15:27:07 1995
%% RCS: $Id: cam*document.tex,v 1.1 1995/09/16 00:23:33 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

Cam*documents represent the source content of the CA/M hypertext document.
Cam*document instances have two components, an HTML file, an in memory
data structure.  The HTML file is the WWW interface and main data storage
mechanism.  The in memory data structure allows the CA/M agent rapid access
to certain attributes of the cam*document instances.

When a new cam*document instance is created the creator can decide whether
or not it will be commentable.  If it is commentable then a
cam*comment-form, a cam*comment-index and a cam*collection are created and
linked into the cam*document instance.

Cam*documents have the following default fields:
\begin{itemize}
\item{\em Title} holds the document's title.
\item{\em Body} holds the main text of the document.
\item{\em Navigation} holds links to other documents.
\item{\em Actions} holds links to forms. (e.g. cam*comment-form)
\item{\em Feedback} holds links to feedback pages. (e.g. cam*comment-index,
cam*collection) 
\item{\em Header} holds information about the current document.
\end{itemize}
Users are able to retrieve and set any of these fields.  They can even add
their own new fields to the cam*document instance.
\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*document}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
add-extendible & actions & ID-p & directory &  \\ 
add-field & body & IDs & divider &  \\ 
delete & collection &  & document-ID-format &  \\ 
delete-extendible & comment-form &  & header-links &  \\ 
extendible-lists & comment-index &  & submission-doc &  \\ 
link & comments &  & url-path &  \\ 
link-feedback & feedback &  &  &  \\ 
make & field &  &  &  \\ 
parse-for-comments & fields &  &  &  \\ 
set-actions & header &  &  &  \\ 
set-body & navigation &  &  &  \\ 
set-feedback & title &  &  &  \\ 
set-field &  &  &  &  \\ 
set-header &  &  &  &  \\ 
set-navigation &  &  &  &  \\ 
set-title &  &  &  &  \\ 
update-number-of-comments &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*document at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*document*make}{\&optional title body author navigation commentable-p tickler directory}
\index{cam*document!make}
Creates a new document page.


{\em title} is a string that contains the {\em title} to be used in the page.

{\em Body} is a string containing the {\em body} of the page.

{\em Author} is a string containing the {\em author} of the page. 

{\em Navigation} is a list of pairs.  Each pair consists of a document-ID and label.
 a link will be created from the new document to the document-ID with the given label.

{\em Commentable-P} if non-nil a comment form will be created to allow users to comment
 on this page.

{\em Tickler} is a list of pairs.  Each pair consists of a string, the {\em tickler} question, and
 a cons cell with the rows and columns for the text area.  If {\em tickler} is non-nil a
 cam*comment-form will be generated for this document page and the associated button
 to add comments will be added to this page.

{\em Directory} is the location where the HTML file will be created.  Defaults to
 cam*document*directory.

Returns a document-ID if successful.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*document*delete}{document-ID}
\index{cam*document!delete}
Deletes {\em document-ID} from the cam*documents table.
This function does not delete the file associated with {\em document-ID}.
Returns nil.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*document*actions}{document-ID}
\index{cam*document!actions}
This attribute returns the actions field of {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*body}{document-ID}
\index{cam*document!body}
This attribute returns the body of {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*collection}{document-ID}
\index{cam*document!collection}
This attribute returns the collection-ID of the comment form associated
with {\em document-ID}, nil if {\em document-ID} is not commentable.
Signals invalid-docuemnt-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*comment-form}{document-ID}
\index{cam*document!comment-form}
This attribute returns the comment-form-ID of the comment form associated
with {\em document-ID}, nil if {\em document-ID} is not commentable.
Signals invalid-docuemnt-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*comment-index}{document-ID}
\index{cam*document!comment-index}
This attribute returns the {\em document-ID} of the comment comment-index document associated
with {\em document-ID}, nil if {\em document-ID} is not commentable.
Signals invalid-docuemnt-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*comments}{document-ID}
\index{cam*document!comments}
This attribute returns the document-IDs of the comments associated
with {\em document-ID}, nil if {\em document-ID} has no comments.
Signals invalid-docuemnt-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*feedback}{document-ID}
\index{cam*document!feedback}
This attribute returns the feedback field of {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*field}{document-ID field}
\index{cam*document!field}
This attribute returns the {\em field} {\em field} of {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
Signals invalid-field-string if {\em field} is not a string.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*fields}{document-ID}
\index{cam*document!fields}
This attribute returns a list of the fields of {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*header}{document-ID}
\index{cam*document!header}
This attribute returns the header of {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*navigation}{document-ID}
\index{cam*document!navigation}
This attribute returns the navigation field of {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*title}{document-ID}
\index{cam*document!title}
This attribute returns the title of {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*document*add-extendible}{document-ID extendible-ID}
\index{cam*document!add-extendible}
Adds the extendible list {\em extendible-ID} to {\em document-ID}.  {\em Extendible-Id}
is added at the end of DOCUMENT-ID's body.
Returns {\em extendible-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*add-field}{document-ID field \&optional value}
\index{cam*document!add-field}
Adds {\em field} to {\em document-ID}.  If {\em value} is non-nil then it is inserted into
{\em field}.
Signals invalid-document-ID if bad {\em document-ID}.
Signals invalid {\em field} if {\em field} is not a string.
Returns {\em field}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*delete-extendible}{document-ID extendible-ID}
\index{cam*document!delete-extendible}
Deletes the extendible list {\em extendible-ID} from {\em document-ID}.
Returns {\em extendible-ID} if successful, nil otherwise.
Signals invalid-document-ID if bad {\em document-ID}.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*extendible-lists}{document-ID}
\index{cam*document!extendible-lists}
Returns a list of extendible-ID, possibly empty, representing the extendible 
lists in {\em document-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*link}{source-ID target-ID}
\index{cam*document!link}
Creates a hypertext link from {\em source-ID} to {\em target-ID}.
Returns non-nil if successful.
Signals invalid-document-ID if {\em source-ID} or {\em target-ID} are bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*link-feedback}{source-ID target-ID}
\index{cam*document!link-feedback}
Creates a hypertext link from {\em source-ID} to {\em target-ID}.
{\em Target-Id} should be a comment/feedback node about {\em source-ID}.
Returns non-nil if successful.
Signals invalid-document-ID if {\em source-ID} or {\em target-ID} are bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*parse-for-comments}{document-ID \&optional comment-index-ID}
\index{cam*document!parse-for-comments}
Returns a list of documents-IDs that are comments on
{\em document-ID} or nil if there are not comments.
Assumes that all comments on {\em document-ID} can be found at the Comment-Index page.
If {\em comment-index-ID} is non-nil it will be used as the comment-index page, else
 {\em document-ID} will be parsed to find the {\em comment-index-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*set-actions}{document-ID actions}
\index{cam*document!set-actions}
Changes DOCUMENT-IDs {\em actions} to {\em actions}.
{\em Actions} is a string.
Signals invalid-document-ID if bad {\em document-ID}.
Returns {\em actions}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*set-body}{document-ID body}
\index{cam*document!set-body}
Changes DOCUMENT-IDs {\em body} to {\em body}.
{\em Body} is a string.
Signals invalid-document-ID if bad {\em document-ID}.
Returns {\em body}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*set-feedback}{document-ID feedback}
\index{cam*document!set-feedback}
Changes DOCUMENT-IDs {\em feedback} to {\em feedback}.
{\em Feedback} is a string.
Signals invalid-document-ID if bad {\em document-ID}.
Returns {\em feedback}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*set-field}{document-ID field value}
\index{cam*document!set-field}
Changes DOCUMENT-ID's {\em field} to {\em value}.
{\em Field} and {\em value} are strings.
Signals invalid-document-ID if bad {\em document-ID}.
Returns {\em value} if successful.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*set-header}{document-ID header}
\index{cam*document!set-header}
Changes DOCUMENT-IDs {\em header} to {\em header}.
{\em Header} is a string.
Signals invalid-document-ID if bad {\em document-ID}.
Returns {\em header}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*set-navigation}{document-ID navigation}
\index{cam*document!set-navigation}
Changes DOCUMENT-IDs {\em navigation} to {\em navigation}.
{\em Navigation} is a string.
Signals invalid-document-ID if bad {\em document-ID}.
Returns {\em navigation}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*set-title}{document-ID title}
\index{cam*document!set-title}
Changes DOCUMENT-IDs {\em title} to {\em title}.
{\em Title} is a string without the $<$TITLE$>$...$<$/TITLE$>$ HTML codes.
Signals invalid-document-ID if bad {\em document-ID}.
Returns {\em title}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*document*update-number-of-comments}{document-ID}
\index{cam*document!update-number-of-comments}
Just recalculates the number of comments for {\em document-ID}.  The 'Index of 
feedback on Page (\#)' link is updated to reflect the correct number of comments.
Returns the number of comments.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{document\}*ID-p}{obj}
\index{cam*document!ID-p}
Returns non-nil if {\em obj} is a valid document-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*\{document\}*IDs}{\&optional parse-directory-p directory}
\index{cam*document!IDs}
Returns a fresh list of all the DOCUMENT-IDs.
If {\em parse-directory-p} is non-nil forces searching of {\em directory} for document files.
{\em Directory} defaults to cam*document*directory.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*document*directory}{}
\index{cam*document!directory}
Holds the default directory where all of the documents are stored.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*document*divider}{}
\index{cam*document!divider}
Holds a string used as a divider in the HTML file.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*document*document-ID-format}{}
\index{cam*document!document-ID-format}
The format string for document-IDs.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*document*header-links}{}
\index{cam*document!header-links}
Holds links that will appear in the document header.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*document*submission-doc}{}
\index{cam*document!submission-doc}
Holds the document-ID that will be shown after submissions.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*document*url-path}{}
\index{cam*document!url-path}
Holds the default url path to where all of the documents are stored.
\end{functiondoc}


\clearpage

\subsection{Class Extendible}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam*extendible.tex -- 
%% Author          : Cam Moore
%% Created On      : Wed Sep 20 15:48:22 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Wed Sep 20 16:00:53 1995
%% RCS: $Id$
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The cam*extendible instances represent extendible lists.  Users are able to
add list items by selecting the last item in the list (Add Item).  The
user's addition is forwarded to the moderator by the agent for approval.
If it is approved a new list item is added to the list.  A single
cam*document instance can contain multiple cam*extendible instances.
Cam*extendible instances have two fundamental components; the in memory extendible-ID
and the extendible list file.
\begin{itemize}
\item{\em The in memory extendible-ID} consists of an interned symbol and
a data structure for each extndible list.  The interned symbol is unique
for the set of web pages and indicates that it is an extendible list ID.
The data structure holds the extendible list ID, the source document page
ID, and the directory where the files are stored.
\item{\em The extendible list file} contains the HTML code for the
extendible list.  This code is included in the documents that have this
extendible list in them.
\end{itemize}\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*extendible}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
add-list-item & body & ID-p & extendible-ID-format &  \\ 
add-source-document &  & IDs & type &  \\ 
delete &  &  &  &  \\ 
delete-source-document &  &  &  &  \\ 
list-doc-IDs &  &  &  &  \\ 
make &  &  &  &  \\ 
set-body &  &  &  &  \\ 
source-doc-ID &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*extendible at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*extendible*make}{document-ID add-title \&optional item-list type}
\index{cam*extendible!make}
Creates a new extendible list in {\em document-ID}.  The extendible list will be
inserted at the end of DOCUMENT-ID's body.

{\em Add-Title} is a string that will be used as the link anchor to the extendible form 
 to add an item to the extendible list.

{\em Item-List} is a list of triples (title, description, body).  The title will be
 a hypertext link to a new document with title and body,  The description will be
 included in the extendible list.

{\em Type} is the {\em type} of the list.  Must be a valid HTML list {\em type} that supports the 
 $<$LI$>$ list item tag.  Defaults to cam*extendible*type.

Returns a new extendible-ID.
Signals 'invalid-document-ID if bad {\em document-ID}.
Signals 'invalid-add-title if {\em add-title} is not a string.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*extendible*delete}{extendible-ID}
\index{cam*extendible!delete}
Deletes {\em extendible-ID} by removing the extendible list from all of the 
document pages it occurs in and deleting the file associated with {\em extendible-ID}.
Returns nil.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*extendible*body}{extendible-ID}
\index{cam*extendible!body}
This attribute returns the contents of the extendible list {\em extendible-ID}.
Signals invalid-extendible-ID.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*extendible*add-list-item}{extendible-ID title description body \&optional author}
\index{cam*extendible!add-list-item}
Adds a new list item to extendible list {\em extendible-ID}, updates EXTENDIBLE-ID's
source-document, creates a new cam*document instance, with {\em title} {\em title}, to 
hold the {\em body}.

{\em Title}, a string, is used as the lable of the hypertext link and the {\em title} of the 
 new document.

{\em Description}, a string, describes the document. it is included in the extendible list.

{\em Body}, a string, is used as the {\em body} of the new cam*document.  It can contain HTML.

{\em Author} is the {\em author} of the new list item.  Defaults to Anonymous.

Returns the new list item.
Signals invalid-extendible-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*extendible*add-source-document}{extendible-ID document-ID}
\index{cam*extendible!add-source-document}
Updates EXTENDIBLE-ID's list of sources to include {\em document-ID}, both in the 
memory table and the HTML file.
Returns the new list of source documents.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*extendible*delete-source-document}{extendible-ID document-ID}
\index{cam*extendible!delete-source-document}
Removes {\em document-ID} from the list of source documents for extendible list
{\em extendible-ID}.
Returns the new list source document-IDs.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*extendible*list-doc-IDs}{extendible-ID}
\index{cam*extendible!list-doc-IDs}
Returns a list, possibly empty, of document IDs.  The document IDs
represent the list items of the extendible list, {\em extendible-ID}.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*extendible*set-body}{extendible-ID body}
\index{cam*extendible!set-body}
Changes EXTENDIBLE-ID's contents to {\em body}.
{\em Body} is a string.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
Returns {\em body}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*extendible*source-doc-ID}{extendible-ID}
\index{cam*extendible!source-doc-ID}
Returns a list of the source document IDs for {\em extendible-ID}.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{extendible\}*ID-p}{obj}
\index{cam*extendible!ID-p}
Returns non-nil if {\em obj} is an extendible list object.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*\{extendible\}*IDs}{\&optional parse-directory-p}
\index{cam*extendible!IDs}
Returns a fresh list of all the extendible-list IDs.
If {\em parse-directory-p} is non-nil forces searching of cam*document*directory for 
extendible-list files.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*extendible*extendible-ID-format}{}
\index{cam*extendible!extendible-ID-format}
The format string for extendible-IDs.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*extendible*type}{}
\index{cam*extendible!type}
Holds the type of the list. Defaults to UL.
\end{functiondoc}


\clearpage

\subsection{Class Extendible-Form}

\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*extendible-form}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
make &  &  & extendible-form-ID-format &  \\ 
 &  &  & mailformat &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*extendible-form at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*extendible-form*make}{\&key extendible-ID source-document-ID add-title next-document-ID errors-to}
\index{cam*extendible-form!make}
Creates a new extendible-form page.  The extendible form is associated with 
{\em extendible-ID} and {\em source-document-ID}.

{\em Next-Document-Id} is the next document that the user will see after adding an item to 
 the list.

{\em Add-Title} is the title used in the extendible list to add a new item.

{\em Errors-To} a string that holds the E-mail address where getcomment errors will be sent.
 Defaults to cam*mail*agent-email-address.

Returns a new extendible-form-ID.
Signals invalid0source-document-ID if bad {\em source-document-ID}.
Signals invalid-next-document-ID if bad NEXT-ID.
Signals invalid-extendible-ID if bad {\em extendible-ID}.
Signals ivalid-add-title if supplied add title is not a string.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*extendible-form*extendible-form-ID-format}{}
\index{cam*extendible-form!extendible-form-ID-format}
The format for extendible-form IDs.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*extendible-form*mailformat}{}
\index{cam*extendible-form!mailformat}
Holds the default mail format for extended lists getcomments.
\end{functiondoc}


\clearpage

\subsection{Class Mail}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam*mail.tex -- 
%% Author          : Carleton Moore
%% Created On      : Wed Jul 19 14:06:07 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Fri Sep 15 14:43:16 1995
%% RCS: $Id: cam*mail.tex,v 1.2 1995/09/16 00:43:31 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Carleton Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

Once an e-mail message is received by the CA/M mail agent, it must be
parsed, archived, and responded to.  The cam*mail class is responsible for
this mail behavior.  It encasulates the net*mail class.\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*mail}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
convert & body & ID-p & agent-email-address &  \\ 
delete & date-received & IDs & moderators &  \\ 
forward-to-moderators & from &  & moderators-to-string &  \\ 
get-header-field & from-user-IDs &  & system-name &  \\ 
make & full-header &  &  &  \\ 
parse-subject-for-ref-ID & reply-to &  &  &  \\ 
parse-subject-for-type & subject &  &  &  \\ 
send-new-mail & to &  &  &  \\ 
 & to-user-IDs &  &  &  \\ 
 & type &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*mail at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*mail*make}{buffer}
\index{cam*mail!make}
Creates a cam*mail instance from the mail message in {\em buffer}.  
{\em Buffer} should contain a full mail message.
Returns a mail-ID or signals 'invalid-parameter if {\em buffer} is not a {\em buffer}.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*mail*delete}{mail-ID}
\index{cam*mail!delete}
Delete mail message {\em mail-ID}.
Returns non-nil or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*mail*body}{mail-ID}
\index{cam*mail!body}
This attribute returns a string used as the Body of
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*date-received}{mail-ID}
\index{cam*mail!date-received}
This attribute returns the date {\em mail-ID} was recieved or signals 
invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*from}{mail-ID}
\index{cam*mail!from}
This attribute returns a string used as the From: line in the mail header for
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*from-user-IDs}{mail-ID}
\index{cam*mail!from-user-IDs}
This attribute returns the from user-ID for {\em mail-ID} signals 
invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*full-header}{mail-ID}
\index{cam*mail!full-header}
This attribute returns the full header of {\em mail-ID} signals 
invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*reply-to}{mail-ID}
\index{cam*mail!reply-to}
This attribute returns a string used as the Reply-To: line in the mail header for
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*subject}{mail-ID}
\index{cam*mail!subject}
This attribute returns a string used as the Subject: line in the mail header for
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*to}{mail-ID}
\index{cam*mail!to}
This attribute returns a string used as the To: line in the mail header for
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*to-user-IDs}{mail-ID}
\index{cam*mail!to-user-IDs}
This attribute returns the to user-ID for {\em mail-ID} signals 
invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*type}{mail-ID}
\index{cam*mail!type}
This attribute returns the type of the CAM mail message of {\em mail-ID}.
The type is found from the CA/M-Message-type header entry.
Signals invalid-mail-ID, if bad {\em mail-ID}.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*mail*convert}{net-mail-ID}
\index{cam*mail!convert}
Converts a net*mail instance into a cam*mail instance.
{\em Net-Mail-Id} is a net*mail instance.
Returns a cam*mail-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*forward-to-moderators}{subject body header cc}
\index{cam*mail!forward-to-moderators}
Creates and sends new mail messages to the moderators.  The moderators are
stored in cam*mail*moderators.  
{\em Subject}, a string, is used as the {\em subject} of the mail message.
{\em Body}, a string, is used as the {\em body} of the mail message.
{\em Header}, a string, is added to the mail headers of the mail message.
{\em Cc}, a string, is the email addresses that should have a carbon copy sent to.
Returns nil.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*get-header-field}{mail-ID field}
\index{cam*mail!get-header-field}
Returns the contents of {\em field} in MAIL-ID's header or nil if {\em field} is not a valid
header {\em field}.
{\em Field} is a string.  A : will be appended for the search.  The search is not
case sensitive.  ie 'subject' will match the 'Subject:' {\em field}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*parse-subject-for-ref-ID}{mail-ID}
\index{cam*mail!parse-subject-for-ref-ID}
Parses the subject of {\em mail-ID} to get MAIL-ID's reference-ID.
The subject of {\em mail-ID} should have the following format:
[cam*mail*system-name: $<$type$>$] $<$reference ID$>$
The parsing will ignore any characters begore the open brace.
The reference ID is optional.
Returns symbol representing the reference ID of the {\em mail-ID} or nil if none.
Signals 'invalid-mail-ID if bad {\em mail-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*parse-subject-for-type}{mail-ID}
\index{cam*mail!parse-subject-for-type}
Parses the subject of {\em mail-ID} to get MAIL-ID's type.
The subject of {\em mail-ID} should have the following format:
[cam*mail*system-name: $<$type$>$] $<$reference ID$>$
The parsing will ignore any characters begore the open brace.
The reference ID is optional.
Returns symbol representing the type of the {\em mail-ID}.
Signals 'invalid-mail-ID if bad {\em mail-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*mail*send-new-mail}{to-address type \&optional subject body header cc}
\index{cam*mail!send-new-mail}
Sends a mail message of {\em type} {\em type} to {\em to-address} with {\em subject} line, carbon copy 
address {\em cc}, {\em header} information and message {\em body}.  {\em Body} is either a buffer or a 
string that will be used as the {\em body} of the mail message. If {\em body} is nil then the 
user will be prompted for the {\em body} of the message. Returns t if there were no errors.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{mail\}*ID-p}{mail-ID}
\index{cam*mail!ID-p}
Returns non-nil if {\em mail-ID} is valid.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*\{mail\}*IDs}{}
\index{cam*mail!IDs}
Returns a list, possibly empty of all the defined MAIL-IDs.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*mail*agent-email-address}{}
\index{cam*mail!agent-email-address}
A string that holds the email address for the CA/M agent.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*mail*moderators}{}
\index{cam*mail!moderators}
Holds a list of the email addresses of the CA/M moderator(s).
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*mail*moderators-to-string}{}
\index{cam*mail!moderators-to-string}
The string that will appear in the CA/M forwarded message.
eg. Project HI-TIME Moderator
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*mail*system-name}{}
\index{cam*mail!system-name}
Holds the name of the system using the CA/M architecture.
\end{functiondoc}


\clearpage

\subsection{Class Oracle}

\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*oracle}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
delete & error-code & ID-p & ID &  \\ 
make & process &  & ID-format &  \\ 
send-cmd & result &  & tables &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*oracle at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*oracle*make}{oracle-user-ID passwd}
\index{cam*oracle!make}
Creates a process connected to an ORACLE database.  The
database is defined by the environment variable ORACLE\_SID.
Signals invalid-username/password if bad {\em oracle-user-ID} and/or {\em passwd}.

Returns an oracle-ID.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*oracle*delete}{oracle-ID}
\index{cam*oracle!delete}
Deletes the {\em oracle-ID}.  Disconnects from the ORACLE database and then
cleans up the {\em oracle-ID}.
Returns nil.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*oracle*error-code}{oracle-ID}
\index{cam*oracle!error-code}
This attribute returns the error-code of the last command sent to {\em oracle-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*oracle*process}{oracle-ID}
\index{cam*oracle!process}
This attribute returns the process associated with {\em oracle-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*oracle*result}{oracle-ID}
\index{cam*oracle!result}
This attribute returns the result of the last command sent to {\em oracle-ID}.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*oracle*send-cmd}{oracle-ID cmd}
\index{cam*oracle!send-cmd}
Sends command {\em cmd} to {\em oracle-ID}.  Updates the status and result of {\em oracle-ID}.
Returns result of {\em cmd} if {\em cmd} was executed successfully, nil otherwise.`
Signals invalid-oracle-ID if bad {\em oracle-ID}.
Signals invalid-cmd if {\em cmd} not a string.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{oracle\}*ID-p}{obj}
\index{cam*oracle!ID-p}
Returns non-nil if {\em obj} is a valid oracle-ID.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*oracle*ID}{}
\index{cam*oracle!ID}
Holds the process-ID for the ORACLE process.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*oracle*ID-format}{}
\index{cam*oracle!ID-format}
The format string for oracle IDs.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*oracle*tables}{}
\index{cam*oracle!tables}
Holds the tables that the agent can access.
\end{functiondoc}


\clearpage

\subsection{Class Page}

\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*page}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
make &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*page at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*page*make}{title background questions survey next-level \&optional further-discussion author}
\index{cam*page!make}
Creates a new page.  The page layout is:
                   {\em title}
                 {\em questions}
                 {\em background}
                 {\em next-level}
             {\em further-discussion}

{\em title}, a string is the {\em title} of the new page.

{\em Background}, a string, is the main body of the page.  It should contain the primary
 content for the page.  

{\em questions} is a list of triples (question, text area width, text area height).  
 The triples will be used to generate tickler {\em questions}.  The second and third 
 component of the triple must be integers, the size of the TEXTAREA. 

{\em Survey} is a list of triples (question, minimum label, maximum label).  The triples
 will be used to generate {\em survey} {\em questions}. The second and third component must 
 be strings, the labels of the scale.

{\em Next-Level} is a cons cell.  The car of the cell must hold a list of triples  
 ({\em title}, description, body).  The {\em title} will be a hypertext link to a new cam*document
 with {\em title} and body, the description will be included in the extendible list.
 The cdr of the cons cell should hold a string that will be used as the link 
 anchor to add a new item to the list.

{\em Further-Discussion}, a string, is further information about the page.

{\em Author} is a string containing the {\em author} of the page. 

Returns a new page-ID.
Signals invalid-question if bad {\em questions}.
\end{functiondoc}


\clearpage

\subsection{Class Participant}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam*participant.tex -- 
%% Author          : Cam Moore
%% Created On      : Fri Sep 15 14:47:44 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Fri Sep 15 14:50:45 1995
%% RCS: $Id: cam*participant.tex,v 1.1 1995/09/16 00:51:28 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

Cam*participants instances represent registered users in the CA/M
archtecture.  Each participant have the following attributes: name, e-mail,
and user definable properties.\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*participant}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
delete & e-mail & ID-p & registered-participants &  \\ 
make & name &  &  &  \\ 
set-property & property &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*participant at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*participant*make}{user-ID \&optional name e-mail}
\index{cam*participant!make}
Creates a registered participant from {\em user-ID}.
{\em Name}, a string, will be used as the user's full {\em name}.
{\em E-Mail}, a string, will be used as the user's {\em e-mail} address.
Signals 'invalid-user-ID if {\em user-ID} is not an net*user instance.
Returns participant-ID if successful.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*participant*delete}{participant-ID}
\index{cam*participant!delete}
Deletes {\em participant-ID} from the registered participants.
Returns nil or signials 'invalid-participant-ID.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*participant*e-mail}{participant-ID}
\index{cam*participant!e-mail}
This attribute returns a string representing the e-mail address of {\em participant-ID}.
Signals 'invalid-participant-ID if {\em participant-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*participant*name}{participant-ID}
\index{cam*participant!name}
This attribute returns a string representing the name of {\em participant-ID}.
Signals 'invalid-participant-ID if {\em participant-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*participant*property}{participant-ID property}
\index{cam*participant!property}
This attribute returns the value corresponding to the {\em property} of {\em participant-ID}
nil if not found.
Signals 'invalid-participant-ID if {\em participant-ID} is bad.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*participant*set-property}{participant-ID property value}
\index{cam*participant!set-property}
Sets the {\em value} corresponding to {\em property} of {\em participant-ID} to {\em value}.
Signals 'invalid-participant-ID if bad {\em participant-ID}.
Returns {\em value}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{participant\}*ID-p}{obj}
\index{cam*participant!ID-p}
Returns non-nil if {\em obj} is a vaild participant-ID.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*participant*registered-participants}{}
\index{cam*participant!registered-participants}
This table holds all of the registered participants.
\end{functiondoc}


\clearpage

\subsection{Module Process}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cam*process.tex -- 
%% Author          : Cam Moore
%% Created On      : Mon Sep 18 15:24:37 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 15:29:27 1995
%% RCS: $Id: cam*process.tex,v 1.1 1995/09/19 02:55:35 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The cam*process module provide a generic mechanism for processing cam*mail
messages.  The developer is able to define their own mail types.  Then they
can create functions to process the mail types.  When the CA/M agent
receives a mail message the cam*proces module determines the type of the
mail message and then dispatches the correct mail processor on the mail
message.
\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*process}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
get-message-processor &  &  & agenda &  \\ 
message-type &  &  & pending-messages &  \\ 
process-message &  &  & waiting-period &  \\ 
put-message-processor &  &  &  &  \\ 
warning &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*process at a glance. }
\end{figure}
\normalsize

\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*process*get-message-processor}{name}
\index{cam*process!get-message-processor}
Returns the processor function corresponding to {\em name}, or nil if not found.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*process*message-type}{mail-ID}
\index{cam*process!message-type}
Determines the message type of {\em mail-ID}.
Messages from the WWW form will have CA/M-Message-Type headers.
Messages from humans will not necessarily have the CA/M-Message-Type header so,
must parse the subject line.
Returns the message type, nil if undefined or signals 'invaliod-mail-ID if
bad {\em mail-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*process*process-message}{message-ID}
\index{cam*process!process-message}
Processes mail message {\em message-ID}.
Returns non-nil if successful or signals 'invalid-message-ID if {\em message-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*process*put-message-processor}{name fn}
\index{cam*process!put-message-processor}
Defines the message processor {\em name} with definition {\em fn}.
{\em Name} is a symbol.
{\em Fn} is a function accepting one argument, the mail-ID of the message.
Typically, the {\em fn} will be called when the message type is {\em name}.
Returns nil or signals 'invalid-name if {\em name} is not a symbol.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*process*warning}{warning-message}
\index{cam*process!warning}
Inserts {\em warning-message} (a string) at the end of cam*process!error-buffer.
Returns NIL.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*process*agenda}{}
\index{cam*process!agenda}
Holds the agenda controlling the activity of the CA/M agent.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*process*pending-messages}{}
\index{cam*process!pending-messages}
Holds a list of pendding messages that have been forwarded to the moderators.
\end{functiondoc}

\begin{functiondoc}{Variable}{cam*process*waiting-period}{}
\index{cam*process!waiting-period}
Holds the number of minutes the agent will wait for the moderator to 
respond to a request.  
Defaults to 5 days.
\end{functiondoc}


\clearpage

\subsection{Class Question}

\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*question}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
add-source-document & body & ID-p & question-ID-format &  \\ 
delete &  & IDs &  &  \\ 
delete-source-document &  &  &  &  \\ 
make &  &  &  &  \\ 
source-doc-ID &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*question at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*question*make}{document-ID next-doc-ID question \&optional get-name-p}
\index{cam*question!make}
Creates a new {\em question} in {\em document-ID}.  The {\em question} 
will be inserted at the end of DOCUMENT-ID's body.

{\em Next-Doc-Id} is the next document that will be view after answering the {\em question}.

{\em Question} is a list of three items: ({\em question}, text area width, text area height).  
 The text {\em question} will be inserted followed by a text area box with width and 
 height.

If {\em get-name-p} is non-nil the {\em question} will ask the user for their Name and
 E-mail address.

Returns a new question-ID.
Signals 'invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*question*delete}{question-ID}
\index{cam*question!delete}
Deletes {\em question-ID} by removing the set of question questions from all of the 
document pages it occurs in and deleting the file associated with {\em question-ID}.
Returns nil.
Signals invalid-question-ID if bad {\em question-ID}.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*question*body}{question-ID}
\index{cam*question!body}
This attribute returns the contents of the set of question questions {\em question-ID}.
Signals invalid-question-ID.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*question*add-source-document}{question-ID document-ID}
\index{cam*question!add-source-document}
Updates QUESTION-ID's list of sources to include {\em document-ID}, both in the 
memory table and the HTML file.
Returns the new list of source documents.
Signals invalid-question-ID if bad {\em question-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*question*delete-source-document}{question-ID document-ID}
\index{cam*question!delete-source-document}
Removes {\em document-ID} from the list of source documents for {\em question-ID}.
Returns the new list source document-IDs.
Signals invalid-question-ID if bad {\em question-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*question*source-doc-ID}{question-ID}
\index{cam*question!source-doc-ID}
Returns a list of the source document IDs for {\em question-ID}.
Signals invalid-question-ID if bad {\em question-ID}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{question\}*ID-p}{obj}
\index{cam*question!ID-p}
Returns non-nil if {\em obj} is a cam*question instance.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*\{question\}*IDs}{\&optional parse-directory-p}
\index{cam*question!IDs}
Returns a fresh list of all the question IDs.
If {\em parse-directory-p} is non-nil forces searching of cam*document*directory for 
question files.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*question*question-ID-format}{}
\index{cam*question!question-ID-format}
The format for question IDs.
\end{functiondoc}


\clearpage

\subsection{Class Survey}

\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf cam*survey}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
add-source-document & body & ID-p & survey-ID-format &  \\ 
delete &  & IDs &  &  \\ 
delete-source-document &  &  &  &  \\ 
make &  &  &  &  \\ 
source-doc-ID &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{cam*survey at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*survey*make}{document-ID questions \&optional get-name-p}
\index{cam*survey!make}
Creates a new set of survey {\em questions} in {\em document-ID}.  The set of survey 
{\em questions} will be inserted at the end of DOCUMENT-ID's body.

{\em Questions} is a list of triples (survey question, minimum label, maximum label).  
 The text survey question will be inserted followed by the minimum label,
 five radio buttons, and the maximum label.
 QUESTION......
 Minimum Label $<$$>$1 $<$$>$2 $<$$>$3 $<$$>$4 $<$$>$5 Maximum Label

If {\em get-name-p} is non-nil the survey question will ask the user for their Name and
 E-mail address.

Returns a new survey-ID.
Signals 'invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*survey*delete}{survey-ID}
\index{cam*survey!delete}
Deletes {\em survey-ID} by removing the set of survey questions from all of the 
document pages it occurs in and deleting the file associated with {\em survey-ID}.
Returns nil.
Signals invalid-survey-ID if bad {\em survey-ID}.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*survey*body}{survey-ID}
\index{cam*survey!body}
This attribute returns the contents of the set of survey questions {\em survey-ID}.
Signals invalid-survey-ID.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*survey*add-source-document}{survey-ID document-ID}
\index{cam*survey!add-source-document}
Updates SURVEY-ID's list of sources to include {\em document-ID}, both in the 
memory table and the HTML file.
Returns the new list of source documents.
Signals invalid-survey-ID if bad {\em survey-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*survey*delete-source-document}{survey-ID document-ID}
\index{cam*survey!delete-source-document}
Removes {\em document-ID} from the list of source documents for set of survey questions
{\em survey-ID}.
Returns the new list source document-IDs.
Signals invalid-survey-ID if bad {\em survey-ID}.
Signals invalid-document-ID if bad {\em document-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*survey*source-doc-ID}{survey-ID}
\index{cam*survey!source-doc-ID}
Returns a list of the source document IDs for {\em survey-ID}.
Signals invalid-survey-ID if bad {\em survey-ID}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{cam*\{survey\}*ID-p}{obj}
\index{cam*survey!ID-p}
Returns non-nil if {\em obj} is an survey list object.
\end{functiondoc}

\begin{functiondoc}{Function}{cam*\{survey\}*IDs}{\&optional parse-directory-p}
\index{cam*survey!IDs}
Returns a fresh list of all the survey-list IDs.
If {\em parse-directory-p} is non-nil forces searching of cam*document*directory for 
survey-list files.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{cam*survey*survey-ID-format}{}
\index{cam*survey!survey-ID-format}
The format for survey IDs.
\end{functiondoc}


\section{Subsystem Scheduler}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% scheduler.tex -- 
%% Author          : Cam Moore
%% Created On      : Mon Sep 18 15:31:50 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 15:34:57 1995
%% RCS: $Id: scheduler.tex,v 1.1 1995/09/19 02:54:58 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The scheduler subsystem provides a mechanism for defining and scheduling
actions.  This subsystem consists of two classes:
\begin{enumerate}
\item{\em sch*agenda} implements the control loop for the CA/M scheduler.
\item{\em sch*action} represents actions that are scheduled.
\end{enumerate}

\clearpage

\subsection{Class Action}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% sch*action.tex -- 
%% Author          : Philip Johnson
%% Created On      : Wed Jul 26 16:15:50 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 15:30:30 1995
%% RCS: $Id: sch*action.tex,v 1.1 1995/09/19 02:55:16 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Philip Johnson
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The sch*action class defines action instances that are invoked on or
after their ``ripe-time'' by the sch*agenda instance they have been
posted to.  For an example of how the sch*action and sch*agenda classes
work together, see the overview documentation for the sch*agenda class.

\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf sch*action}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
fire &  &  &  &  \\ 
fn &  &  &  &  \\ 
make &  &  &  &  \\ 
ripe-time &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{sch*action at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{sch*action*make}{fn ripe-time}
\index{sch*action!make}
Defines and returns a new sch*action instance.
{\em Fn} is a function of no arguments that is called when {\em ripe-time} has been reached
or exceeded when this action is encountered during agenda action processing. 
{\em Ripe-Time} is a u*date instance.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{sch*action*fire}{action-ID}
\index{sch*action!fire}
Invokes the function associated with {\em action-ID}.
Returns the value returned by the function associated with {\em action-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{sch*action*fn}{action-ID}
\index{sch*action!fn}
Returns the function associated with {\em action-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{sch*action*ripe-time}{action-ID}
\index{sch*action!ripe-time}
Returns the ripe-time (a u*date instance) associated with {\em action-ID}.
\end{functiondoc}


\clearpage

\subsection{Class Agenda}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% sch*agenda.tex -- 
%% Author          : Philip Johnson
%% Created On      : Wed Jul 26 14:27:12 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 15:31:25 1995
%% RCS: $Id: sch*agenda.tex,v 1.1 1995/09/19 02:54:33 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Philip Johnson
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The sch*agenda class implements the control loop for the CA/M scheduler.
Each agenda instance holds a list of action instances.  Each agenda
instance is also associated with an itimer instance that wakes up 
every wakeup-interval and invokes all of the actions on the 
associated agenda whose wakeup time has been reached or exceeded. 
The process of checking all of the actions after waking up is called the 
{\em agenda action cycle}, and an action that is ready to be
invoked is called {\em ripe}.  Invoking a ripe action is called 
{\em firing}.

The execution of actions can in turn schedule new actions that can be
posted to the agenda via sch*agenda*post.  Note that an 
action posted during one agenda action cycle will
not be tested for ripeness during this cycle, but will be set aside
until the next agenda action cycle.  This allows actions to repost
themselves to the agenda without creating an infinite loop.

The following scenario shows how to set up a new sch*agenda instance 
and post an action to it that prints a simple message in the minibuffer,
then reposts itself to the agenda so that it can be fired again during
the next agenda action cycle.

The following is taken from a *scratch* buffer, and consists of an
explanatory comment, the form invoked, and the value returned from it.
Minibuffer messages are not shown.

\small\begin{verbatim}
;; Make a new agenda instance that wakes up every 10 seconds. 
(sch*agenda*make 'foo 10)
foo

;; Define an action function that prints a message and reposts itself
(defun foo*action*function ()
  (message "Here I am at %s" (u*date*hh:mm:ss))
  (sch*agenda*post 'foo
                   (sch*action*make 'foo*action*function (u*date*make))))

;; Post a single action to the foo agenda instance
(sch*agenda*post 'foo (sch*action*make 'foo*action*function (u*date*make)))
[cl-struct-sch*action "57J@FD" foo*action*function]

;; Now the minibuffer will display a message every 10 seconds from the 
;; most recently posted sch*action instance.

;; Stop this nonsense.
(sch*agenda*delete 'foo)
nil
\end{verbatim}\normalsize

Note that there is currently no backup mechanism for sch*agenda instances.
This needs to be implemented so that agenda processes can be killed and
restarted without losing the contents of the agenda. 

\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf sch*agenda}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
delete &  &  &  &  \\ 
make &  &  &  &  \\ 
post &  &  &  &  \\ 
unpost &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{sch*agenda at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{sch*agenda*make}{agenda-ID wakeup-interval}
\index{sch*agenda!make}
Defines a new agenda instance.
{\em Agenda-Id} must be a symbol not currently used as a sch*agenda instance. 
{\em Wakeup-Interval} is a number indicating the number of seconds between 
agenda action cycles for this agenda instance. 
Returns {\em agenda-ID}.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{sch*agenda*delete}{agenda-ID}
\index{sch*agenda!delete}
Deletes {\em agenda-ID}.  Returns nil.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{sch*agenda*post}{agenda-ID action-ID}
\index{sch*agenda!post}
Posts {\em action-ID} to {\em agenda-ID}.
Returns {\em action-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{sch*agenda*unpost}{agenda-ID action-ID}
\index{sch*agenda!unpost}
Removes {\em action-ID} from {\em agenda-ID}, if it is there.
Returns nil.
\end{functiondoc}


\section{Subsystem Net}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% net.tex -- 
%% Author          : Cam Moore
%% Created On      : Mon Sep 18 15:13:43 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 15:18:41 1995
%% RCS: $Id: net.tex,v 1.1 1995/09/19 02:56:16 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The net subsystem provides a simple programmatic interface to e-mail.  The
combination of net*mail and net*mailbox provide the semantics for
retrieving, parsing, and sending e-mail.  The net*user class can create
instances to reflect the different people/entities that send/receive e-mail.

\clearpage

\subsection{Class Mail}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% net*mail.tex -- 
%% Author          : Cam Moore
%% Created On      : Mon Sep 18 15:10:58 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 15:13:25 1995
%% RCS: $Id: net*mail.tex,v 1.1 1995/09/19 02:56:29 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

The net*mail class provides a programatic interface to e-mail.  Each
instance represents an e-mail message.  All of the information is stored as
properites of the net*mail-ID.\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf net*mail}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
delete & body & ID-p &  &  \\ 
get-header-field & date-received & IDs &  &  \\ 
make & from &  &  &  \\ 
send-new-mail & from-user-IDs &  &  &  \\ 
 & full-header &  &  &  \\ 
 & reply-to &  &  &  \\ 
 & subject &  &  &  \\ 
 & to &  &  &  \\ 
 & to-user-IDs &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{net*mail at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mail*make}{buffer}
\index{net*mail!make}
Creates a net*mail instance from the mail message in {\em buffer}.  
{\em Buffer} should contain a full mail message.
Returns a mail-ID or signals 'invalid-parameter if {\em buffer} is not a {\em buffer}.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mail*delete}{mail-ID}
\index{net*mail!delete}
Delete mail message {\em mail-ID}.
Returns T or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mail*body}{mail-ID}
\index{net*mail!body}
This attribute returns a string used as the Body of
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*date-received}{mail-ID}
\index{net*mail!date-received}
This attribute returns the date {\em mail-ID} was recieved or signals 
invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*from}{mail-ID}
\index{net*mail!from}
This attribute returns a string used as the From: line in the mail header for
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*from-user-IDs}{mail-ID}
\index{net*mail!from-user-IDs}
This attribute returns the from user-ID for {\em mail-ID} signals 
invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*full-header}{mail-ID}
\index{net*mail!full-header}
This attribute returns the full header of {\em mail-ID} signals 
invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*reply-to}{mail-ID}
\index{net*mail!reply-to}
This attribute returns a string used as the Reply-To: line in the mail header for
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*subject}{mail-ID}
\index{net*mail!subject}
This attribute returns a string used as the Subject: line in the mail header for
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*to}{mail-ID}
\index{net*mail!to}
This attribute returns a string used as the To: line in the mail header for
{\em mail-ID} or signals invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*to-user-IDs}{mail-ID}
\index{net*mail!to-user-IDs}
This attribute returns the to user-ID for {\em mail-ID} signals 
invalid-mail-ID if {\em mail-ID} is bad.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mail*get-header-field}{mail-ID field}
\index{net*mail!get-header-field}
Returns the contents of {\em field} in MAIL-ID's header or nil if {\em field} is not a valid
header {\em field}.
{\em Field} is a string.  A : will be appended for the search.  The search is not
case sensitive.  ie 'subject' will match the 'Subject:' {\em field}.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mail*send-new-mail}{to-address \&optional subject body header cc}
\index{net*mail!send-new-mail}
Sends email to {\em to-address} with {\em subject} line, carbon copy address {\em cc}, {\em header} 
information and message {\em body}.  {\em Body} is either a buffer or a string that will 
be used as the {\em body} of the mail message. If {\em body} is nil then the user will be 
prompted for the {\em body} of the message. Returns t if there were no errors.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*\{mail\}*ID-p}{obj}
\index{net*mail!ID-p}
Returns non-nil if {\em obj} is a valid mail-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{net*\{mail\}*IDs}{}
\index{net*mail!IDs}
Returns a list, possibly empty, of all the defined MAIL-IDs.
\end{functiondoc}


\clearpage

\subsection{Class Mailbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% net*mailbox.tex -- 
%% Author          : Cam Moore
%% Created On      : Mon Sep 18 15:19:17 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 15:20:26 1995
%% RCS: $Id: net*mailbox.tex,v 1.1 1995/09/19 02:56:06 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

Instances of the net*mailbox class represent storage spaces for net*mail
instances.  They provide an archiving mechanism for e-mail.\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf net*mailbox}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
count-messages & directory & ID-p & current-messages & initialize \\ 
delete & new-mail &  & csdl-dir & load-bbdb \\ 
delete-message &  &  &  & load-bbdb-into-vm \\ 
get-new-mail &  &  &  & load-vm \\ 
mail-messages &  &  &  &  \\ 
make &  &  &  &  \\ 
set-unread-mail &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{net*mailbox at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mailbox*make}{directory}
\index{net*mailbox!make}
Creates a mailbox.  It uses {\em directory} to store the mail messages.
{\em Directory} must exist. Any mail messages in it are considered in the mailbox.
Returns a mailbox-ID.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mailbox*delete}{mailbox-ID}
\index{net*mailbox!delete}
Deletes the {\em mailbox-ID}.  This does not delete the mail file associated
with the {\em mailbox-ID}.
Signals invalid-mailbox-ID, if bad {\em mailbox-ID}.
Returns nil.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mailbox*directory}{mailbox-ID}
\index{net*mailbox!directory}
This attribute returns the directory where the mail messages
are stored for {\em mailbox-ID}.
Signals invalid-mailbox-ID, if bad {\em mailbox-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mailbox*new-mail}{mailbox-ID}
\index{net*mailbox!new-mail}
This attribute returns the new-mail stored in {\em mailbox-ID}.
Signals invalid-mailbox-ID, if bad {\em mailbox-ID}.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mailbox*count-messages}{mailbox-ID}
\index{net*mailbox!count-messages}
Returns the number of messages in {\em mailbox-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mailbox*delete-message}{mailbox-ID mail-ID}
\index{net*mailbox!delete-message}
Deletes {\em mail-ID} from {\em mailbox-ID}.
Signals invalid-mailbox-ID, if bad {\em mailbox-ID}.
Signals invalid-mail-ID, if bad {\em mail-ID}.
Returns non-nil if successful, nil otherwise.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mailbox*get-new-mail}{mailbox-ID}
\index{net*mailbox!get-new-mail}
Checks for new mail in {\em mailbox-ID}.
Signals invalid-mailbox-ID, if bad {\em mailbox-ID}.
Returns a list, possibly empty, of new mail-IDs.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mailbox*mail-messages}{mailbox-ID}
\index{net*mailbox!mail-messages}
Returns a list, possibly empty, of mail-IDs of the mail 
messages in {\em mailbox-ID}.
Signals invalid-mailbox-ID, if bad {\em mailbox-ID}.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mailbox*set-unread-mail}{mailbox-ID unread-mail}
\index{net*mailbox!set-unread-mail}
Adds {\em unread-mail}, a list of mail-IDs, to the new-mail property of {\em mailbox-ID}.
Returns the new-mail property of {\em mailbox-ID}.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*\{mailbox\}*ID-p}{obj}
\index{net*mailbox!ID-p}
Returns non-nil if {\em obj} is a valid mailbox-ID.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{net*mailbox*current-messages}{}
\index{net*mailbox!current-messages}
Holds the currently defined mail messages in the mailbox.
\end{functiondoc}

\begin{functiondoc}{Variable}{net*mailbox@csdl-dir}{}
\index{net*mailbox!csdl-dir}
Base directory for the CSDL file structure.
\end{functiondoc}


\subsubsection*{Administrative}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*mailbox@initialize}{}
\index{net*mailbox!initialize}
Initializes vm, and bbdb for the net*mailbox, net*mail, and net*user classes.
This function should be run before creating any mailboxes.
Returns nil.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mailbox@load-bbdb}{}
\index{net*mailbox!load-bbdb}
Loads and customizes the Big Brother E-mail Database.
Returns t.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mailbox@load-bbdb-into-vm}{}
\index{net*mailbox!load-bbdb-into-vm}
Integrates BBDB with VM.
BBDB will now automatically record all e-mail senders into database.
ESCAPE-TAB will do completion on E-mail People.
Returns t.
\end{functiondoc}

\begin{functiondoc}{Function}{net*mailbox@load-vm}{}
\index{net*mailbox!load-vm}
Loads and customizes VM mail reader.
Returns t.
\end{functiondoc}


\clearpage

\subsection{Class User}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: Latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% net*user.tex -- 
%% Author          : Cam Moore
%% Created On      : Mon Sep 18 15:20:41 1995
%% Last Modified By: Cam Moore
%% Last Modified On: Mon Sep 18 15:23:47 1995
%% RCS: $Id: net*user.tex,v 1.1 1995/09/19 02:55:54 cmoore Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Copyright (C) 1995 Cam Moore
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 

Net*user instances represent people or entities which send or receive
e-mail.  Each net*user instance is intended to represent a single user.
There can be multiple e-mail addresses for the same user.  The net*user
class uses the Big Brother DataBase (BBDB) to store it's information.  This
allows a single entry to have more than one e-mail address.  Non-human
users, such as the mail agent, are supported.  They are treated just like
the human users.\small
\begin{figure}[htpb]
\begin{center}
\begin{tabular} {|l|l|l|l|l|} \hline
\multicolumn{5}{|c|}{{\bf net*user}} \\  \hline
{\em Operations} & {\em Attributes} & {\em Collections} & {\em Variables} & {\em Administrative} \\ \hline
combine & addresses & ID-p & ID-format & set-directory \\ 
delete & aka & IDs & directory &  \\ 
make & company &  &  &  \\ 
make-from-raw-info & first-name &  &  &  \\ 
remove & full-name &  &  &  \\ 
set-addresses & last-name &  &  &  \\ 
set-aka & net &  &  &  \\ 
set-company & phones &  &  &  \\ 
set-first-name & primary-address &  &  &  \\ 
set-last-name & property &  &  &  \\ 
set-net &  &  &  &  \\ 
set-phones &  &  &  &  \\ 
set-property &  &  &  &  \\ 
 \hline
\end{tabular}
\end{center}
\caption{net*user at a glance. }
\end{figure}
\normalsize

\subsubsection*{Constructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*user*make}{bbdb-record}
\index{net*user!make}
Creates a user from the {\em bbdb-record}
Returns a user-ID or nil if no {\em bbdb-record}.
\end{functiondoc}


\subsubsection*{Destructor}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*user*delete}{user-ID}
\index{net*user!delete}
Deletes the net*user instance {\em user-ID}.  Does not affect the database
Returns t if successful, or signals an error otherwise.
\end{functiondoc}


\subsubsection*{Attributes}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*user*addresses}{user-ID}
\index{net*user!addresses}
This attribute returns the addresses of {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*aka}{user-ID}
\index{net*user!aka}
This attribute returns the alternative names of {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*company}{user-ID}
\index{net*user!company}
This attribute returns the company of {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*first-name}{user-ID}
\index{net*user!first-name}
This attribute returns the first name of {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*full-name}{user-ID}
\index{net*user!full-name}
This attribute returns the full name of {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*last-name}{user-ID}
\index{net*user!last-name}
This attribute returns the last name of {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*net}{user-ID}
\index{net*user!net}
This attribute returns a list of network addresses for {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*phones}{user-ID}
\index{net*user!phones}
This attribute returns a list of phone numbers for {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*primary-address}{user-ID}
\index{net*user!primary-address}
This attribute returns the primary net address for {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*property}{user-ID property}
\index{net*user!property}
This attribute returns the {\em property} of {\em user-ID}.
Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}


\subsubsection*{Operations}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*user*combine}{user-ID1 user-ID2}
\index{net*user!combine}
Combines {\em user-ID1} and {\em user-ID2} into one record.
Returns the new USER-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*make-from-raw-info}{name \&optional e-mail company}
\index{net*user!make-from-raw-info}
Creates a user from the raw information {\em name}, {\em e-mail}, and {\em company}.
All the parameters are strings.
Returns a user-ID.
Signals 'invalid-parameter if parameters are not strings.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*remove}{user-ID}
\index{net*user!remove}
Removes {\em user-ID} from the database and deletes the net*user instance.
Returns t if successful, or signals an error otherwise.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*set-addresses}{user-ID addresses}
\index{net*user!set-addresses}
Sets the {\em addresses} attribute of {\em user-ID} to {\em addresses}.
Returns non-nil if successful. Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*set-aka}{user-ID aka}
\index{net*user!set-aka}
Sets the alternative names attribute of {\em user-ID} to {\em aka}.
Returns non-nil if successful. Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*set-company}{user-ID company}
\index{net*user!set-company}
Sets the {\em company} attribute of {\em user-ID} to {\em company}.
Returns non-nil if successful. Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*set-first-name}{user-ID first-name}
\index{net*user!set-first-name}
Sets the first name attribute of {\em user-ID} to {\em first-name}.
Returns non-nil if successful. Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*set-last-name}{user-ID last-name}
\index{net*user!set-last-name}
Sets the last name attribute of {\em user-ID} to {\em last-name}.
Returns non-nil if successful. Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*set-net}{user-ID net}
\index{net*user!set-net}
Sets the network addresses attribute of {\em user-ID} to {\em net}.
Returns non-nil if successful. Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*set-phones}{user-ID phones}
\index{net*user!set-phones}
Sets the phone numbers attribute of {\em user-ID} to {\em phones}.
Returns non-nil if successful. Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}

\begin{functiondoc}{Function}{net*user*set-property}{user-ID property value}
\index{net*user!set-property}
Sets the {\em property} attribute of {\em user-ID} to {\em value}.
Returns non-nil if successful. Signals 'invalid-user-ID if {\em user-ID} is bad.
\end{functiondoc}


\subsubsection*{Collections}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*\{user\}*ID-p}{obj}
\index{net*user!ID-p}
Returns non-nil if {\em obj} is a valid user-ID.
\end{functiondoc}

\begin{functiondoc}{Function}{net*\{user\}*IDs}{}
\index{net*user!IDs}
Returns a list, possibly empty, of user-IDs for the users defined in the 
user database.
\end{functiondoc}


\subsubsection*{Variables}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Variable}{net*user*ID-format}{}
\index{net*user!ID-format}
Holds the format string used to generate user-IDs.
\end{functiondoc}

\begin{functiondoc}{Variable}{net*user*directory}{}
\index{net*user!directory}
Holds the directory that the user database file is stored
\end{functiondoc}


\subsubsection*{Administrative}
\par\vspace*{0.00in}\par\hrule\par\medskip\par


\begin{functiondoc}{Function}{net*user@set-directory}{directory}
\index{net*user!set-directory}
Sets the {\em directory} that the users database will be stored in to {\em directory}.
Returns nil or signals invalid-directory if bad {\em directory}.
\end{functiondoc}

\end{document}